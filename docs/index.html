<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=cGvuclDC_Z1vE_cnVEU6AfLhOPS0h0oMHpEhTRSdXHM5KEqTDahEV1ECVSsZOMl97z3bINmEHhaRt63wXpnj_iJvIx7i6R-8--l9gSqQgxY);.lst-kix_ni52l0iimpw1-8>li:before{content:"\0025a0   "}ul.lst-kix_g67s3evngraf-3{list-style-type:none}ul.lst-kix_g67s3evngraf-2{list-style-type:none}ul.lst-kix_g67s3evngraf-1{list-style-type:none}ul.lst-kix_g67s3evngraf-0{list-style-type:none}ul.lst-kix_g67s3evngraf-8{list-style-type:none}ul.lst-kix_g67s3evngraf-7{list-style-type:none}ul.lst-kix_g67s3evngraf-6{list-style-type:none}ul.lst-kix_g67s3evngraf-5{list-style-type:none}ul.lst-kix_g67s3evngraf-4{list-style-type:none}ul.lst-kix_z1bpybpak2qw-0{list-style-type:none}.lst-kix_ni52l0iimpw1-0>li:before{content:"\0025cf   "}ul.lst-kix_z1bpybpak2qw-4{list-style-type:none}.lst-kix_ni52l0iimpw1-2>li:before{content:"\0025a0   "}ul.lst-kix_z1bpybpak2qw-3{list-style-type:none}ul.lst-kix_z1bpybpak2qw-2{list-style-type:none}.lst-kix_ni52l0iimpw1-1>li:before{content:"\0025cb   "}.lst-kix_hibij0os081w-0>li:before{content:"\0025cf   "}ul.lst-kix_z1bpybpak2qw-1{list-style-type:none}.lst-kix_hibij0os081w-1>li:before{content:"\0025cb   "}.lst-kix_ni52l0iimpw1-7>li:before{content:"\0025cb   "}.lst-kix_hibij0os081w-2>li:before{content:"\0025a0   "}.lst-kix_ni52l0iimpw1-6>li:before{content:"\0025cf   "}ul.lst-kix_hibij0os081w-0{list-style-type:none}.lst-kix_ni52l0iimpw1-5>li:before{content:"\0025a0   "}ul.lst-kix_z1bpybpak2qw-8{list-style-type:none}.lst-kix_ni52l0iimpw1-4>li:before{content:"\0025cb   "}ul.lst-kix_z1bpybpak2qw-7{list-style-type:none}ul.lst-kix_z1bpybpak2qw-6{list-style-type:none}ul.lst-kix_z1bpybpak2qw-5{list-style-type:none}.lst-kix_ni52l0iimpw1-3>li:before{content:"\0025cf   "}.lst-kix_dab0nnle5hev-8>li:before{content:"\0025a0   "}ul.lst-kix_hibij0os081w-2{list-style-type:none}ul.lst-kix_hibij0os081w-1{list-style-type:none}ul.lst-kix_hibij0os081w-4{list-style-type:none}ul.lst-kix_hibij0os081w-3{list-style-type:none}ul.lst-kix_hibij0os081w-6{list-style-type:none}ul.lst-kix_hibij0os081w-5{list-style-type:none}ul.lst-kix_hibij0os081w-8{list-style-type:none}ul.lst-kix_hibij0os081w-7{list-style-type:none}ul.lst-kix_zayd0muvexxh-0{list-style-type:none}ul.lst-kix_zayd0muvexxh-1{list-style-type:none}ul.lst-kix_d0wm6b2t7nsb-0{list-style-type:none}ul.lst-kix_d0wm6b2t7nsb-1{list-style-type:none}ul.lst-kix_d0wm6b2t7nsb-2{list-style-type:none}ul.lst-kix_zayd0muvexxh-4{list-style-type:none}ul.lst-kix_zayd0muvexxh-5{list-style-type:none}ul.lst-kix_zayd0muvexxh-2{list-style-type:none}ul.lst-kix_zayd0muvexxh-3{list-style-type:none}ul.lst-kix_zayd0muvexxh-8{list-style-type:none}ul.lst-kix_d0wm6b2t7nsb-7{list-style-type:none}ul.lst-kix_d0wm6b2t7nsb-8{list-style-type:none}ul.lst-kix_zayd0muvexxh-6{list-style-type:none}ul.lst-kix_zayd0muvexxh-7{list-style-type:none}ul.lst-kix_d0wm6b2t7nsb-3{list-style-type:none}ul.lst-kix_d0wm6b2t7nsb-4{list-style-type:none}ul.lst-kix_d0wm6b2t7nsb-5{list-style-type:none}ul.lst-kix_d0wm6b2t7nsb-6{list-style-type:none}li.li-bullet-2:before{margin-left:-0.8pt;white-space:nowrap;display:inline-block;min-width:0.8pt}ul.lst-kix_dab0nnle5hev-0{list-style-type:none}ul.lst-kix_dab0nnle5hev-1{list-style-type:none}ul.lst-kix_dab0nnle5hev-2{list-style-type:none}ul.lst-kix_dab0nnle5hev-3{list-style-type:none}ul.lst-kix_dab0nnle5hev-4{list-style-type:none}ul.lst-kix_dab0nnle5hev-5{list-style-type:none}ul.lst-kix_dab0nnle5hev-6{list-style-type:none}ul.lst-kix_dab0nnle5hev-7{list-style-type:none}ul.lst-kix_dab0nnle5hev-8{list-style-type:none}.lst-kix_g67s3evngraf-3>li:before{content:"\0025cf   "}ul.lst-kix_uhggez9xp83g-5{list-style-type:none}ul.lst-kix_uhggez9xp83g-4{list-style-type:none}ul.lst-kix_uhggez9xp83g-3{list-style-type:none}ul.lst-kix_uhggez9xp83g-2{list-style-type:none}.lst-kix_g67s3evngraf-1>li:before{content:"\0025cb   "}ul.lst-kix_uhggez9xp83g-1{list-style-type:none}.lst-kix_g67s3evngraf-5>li:before{content:"\0025a0   "}ul.lst-kix_uhggez9xp83g-0{list-style-type:none}.lst-kix_zayd0muvexxh-2>li:before{content:"\0025a0   "}.lst-kix_zayd0muvexxh-6>li:before{content:"\0025cf   "}ul.lst-kix_uhggez9xp83g-8{list-style-type:none}.lst-kix_zayd0muvexxh-4>li:before{content:"\0025cb   "}ul.lst-kix_uhggez9xp83g-7{list-style-type:none}ul.lst-kix_uhggez9xp83g-6{list-style-type:none}.lst-kix_vf4xolrunyye-5>li:before{content:"\0025a0   "}.lst-kix_vf4xolrunyye-7>li:before{content:"\0025cb   "}.lst-kix_zayd0muvexxh-8>li:before{content:"\0025a0   "}.lst-kix_d0wm6b2t7nsb-8>li:before{content:"\0025a0   "}.lst-kix_d0wm6b2t7nsb-6>li:before{content:"\0025cf   "}.lst-kix_uhggez9xp83g-4>li:before{content:"\0025cb   "}.lst-kix_uhggez9xp83g-8>li:before{content:"\0025a0   "}li.li-bullet-1:before{margin-left:-0.8pt;white-space:nowrap;display:inline-block;min-width:0.8pt}.lst-kix_d0wm6b2t7nsb-4>li:before{content:"\0025cb   "}.lst-kix_vf4xolrunyye-3>li:before{content:"\0025cf   "}.lst-kix_uhggez9xp83g-6>li:before{content:"\0025cf   "}.lst-kix_uhggez9xp83g-0>li:before{content:"\0025cf   "}.lst-kix_vf4xolrunyye-1>li:before{content:"\0025cb   "}.lst-kix_g67s3evngraf-7>li:before{content:"\0025cb   "}.lst-kix_zayd0muvexxh-0>li:before{content:"\0025cf   "}.lst-kix_uhggez9xp83g-2>li:before{content:"\0025a0   "}.lst-kix_dab0nnle5hev-6>li:before{content:"\0025cf   "}.lst-kix_dab0nnle5hev-4>li:before{content:"\0025cb   "}.lst-kix_dab0nnle5hev-0>li:before{content:"\0025cf   "}.lst-kix_hibij0os081w-3>li:before{content:"\0025cf   "}.lst-kix_hibij0os081w-5>li:before{content:"\0025a0   "}.lst-kix_dab0nnle5hev-2>li:before{content:"\0025a0   "}ul.lst-kix_ni52l0iimpw1-8{list-style-type:none}.lst-kix_hibij0os081w-7>li:before{content:"\0025cb   "}ul.lst-kix_ni52l0iimpw1-0{list-style-type:none}ul.lst-kix_ni52l0iimpw1-1{list-style-type:none}ul.lst-kix_ni52l0iimpw1-2{list-style-type:none}ul.lst-kix_ni52l0iimpw1-3{list-style-type:none}ul.lst-kix_ni52l0iimpw1-4{list-style-type:none}ul.lst-kix_ni52l0iimpw1-5{list-style-type:none}ul.lst-kix_ni52l0iimpw1-6{list-style-type:none}ul.lst-kix_ni52l0iimpw1-7{list-style-type:none}ul.lst-kix_b7q1lmkxhuiz-0{list-style-type:none}ul.lst-kix_b7q1lmkxhuiz-1{list-style-type:none}ul.lst-kix_b7q1lmkxhuiz-2{list-style-type:none}ul.lst-kix_b7q1lmkxhuiz-3{list-style-type:none}ul.lst-kix_b7q1lmkxhuiz-4{list-style-type:none}ul.lst-kix_b7q1lmkxhuiz-5{list-style-type:none}ul.lst-kix_b7q1lmkxhuiz-6{list-style-type:none}ul.lst-kix_b7q1lmkxhuiz-7{list-style-type:none}ul.lst-kix_b7q1lmkxhuiz-8{list-style-type:none}.lst-kix_x6qcfrr4zgr6-1>li:before{content:"\0025cb   "}.lst-kix_x6qcfrr4zgr6-2>li:before{content:"\0025a0   "}.lst-kix_x6qcfrr4zgr6-3>li:before{content:"\0025cf   "}.lst-kix_x6qcfrr4zgr6-4>li:before{content:"\0025cb   "}.lst-kix_x6qcfrr4zgr6-7>li:before{content:"\0025cb   "}.lst-kix_x6qcfrr4zgr6-5>li:before{content:"\0025a0   "}.lst-kix_x6qcfrr4zgr6-6>li:before{content:"\0025cf   "}.lst-kix_z1bpybpak2qw-3>li:before{content:"\0025cf   "}.lst-kix_x6qcfrr4zgr6-8>li:before{content:"\0025a0   "}.lst-kix_z1bpybpak2qw-1>li:before{content:"\0025cb   "}.lst-kix_z1bpybpak2qw-2>li:before{content:"\0025a0   "}.lst-kix_z1bpybpak2qw-0>li:before{content:"\0025cf   "}.lst-kix_b7q1lmkxhuiz-0>li:before{content:"\0025cf   "}.lst-kix_b7q1lmkxhuiz-1>li:before{content:"\0025cb   "}.lst-kix_z1bpybpak2qw-4>li:before{content:"\0025cb   "}.lst-kix_b7q1lmkxhuiz-2>li:before{content:"\0025a0   "}.lst-kix_z1bpybpak2qw-5>li:before{content:"\0025a0   "}.lst-kix_d0wm6b2t7nsb-0>li:before{content:"\0025cf   "}.lst-kix_z1bpybpak2qw-7>li:before{content:"\0025cb   "}.lst-kix_d0wm6b2t7nsb-2>li:before{content:"\0025a0   "}.lst-kix_z1bpybpak2qw-6>li:before{content:"\0025cf   "}.lst-kix_d0wm6b2t7nsb-3>li:before{content:"\0025cf   "}.lst-kix_z1bpybpak2qw-8>li:before{content:"\0025a0   "}.lst-kix_d0wm6b2t7nsb-1>li:before{content:"\0025cb   "}.lst-kix_x6qcfrr4zgr6-0>li:before{content:"\0025cf   "}.lst-kix_b7q1lmkxhuiz-5>li:before{content:"\0025a0   "}.lst-kix_b7q1lmkxhuiz-3>li:before{content:"\0025cf   "}.lst-kix_b7q1lmkxhuiz-7>li:before{content:"\0025cb   "}.lst-kix_b7q1lmkxhuiz-4>li:before{content:"\0025cb   "}.lst-kix_b7q1lmkxhuiz-8>li:before{content:"\0025a0   "}.lst-kix_b7q1lmkxhuiz-6>li:before{content:"\0025cf   "}.lst-kix_zayd0muvexxh-3>li:before{content:"\0025cf   "}.lst-kix_g67s3evngraf-2>li:before{content:"\0025a0   "}.lst-kix_zayd0muvexxh-1>li:before{content:"\0025cb   "}.lst-kix_zayd0muvexxh-5>li:before{content:"\0025a0   "}.lst-kix_g67s3evngraf-4>li:before{content:"\0025cb   "}ul.lst-kix_vf4xolrunyye-3{list-style-type:none}ul.lst-kix_vf4xolrunyye-2{list-style-type:none}ul.lst-kix_vf4xolrunyye-5{list-style-type:none}ul.lst-kix_vf4xolrunyye-4{list-style-type:none}ul.lst-kix_vf4xolrunyye-1{list-style-type:none}ul.lst-kix_vf4xolrunyye-0{list-style-type:none}ul.lst-kix_vf4xolrunyye-7{list-style-type:none}ul.lst-kix_vf4xolrunyye-6{list-style-type:none}ul.lst-kix_vf4xolrunyye-8{list-style-type:none}.lst-kix_zayd0muvexxh-7>li:before{content:"\0025cb   "}.lst-kix_vf4xolrunyye-6>li:before{content:"\0025cf   "}.lst-kix_g67s3evngraf-0>li:before{content:"\0025cf   "}.lst-kix_uhggez9xp83g-7>li:before{content:"\0025cb   "}.lst-kix_d0wm6b2t7nsb-7>li:before{content:"\0025cb   "}.lst-kix_vf4xolrunyye-4>li:before{content:"\0025cb   "}.lst-kix_uhggez9xp83g-5>li:before{content:"\0025a0   "}.lst-kix_d0wm6b2t7nsb-5>li:before{content:"\0025a0   "}.lst-kix_vf4xolrunyye-2>li:before{content:"\0025a0   "}.lst-kix_vf4xolrunyye-0>li:before{content:"  "}.lst-kix_g67s3evngraf-8>li:before{content:"\0025a0   "}.lst-kix_uhggez9xp83g-3>li:before{content:"\0025cf   "}.lst-kix_g67s3evngraf-6>li:before{content:"\0025cf   "}.lst-kix_uhggez9xp83g-1>li:before{content:"\0025cb   "}.lst-kix_dab0nnle5hev-7>li:before{content:"\0025cb   "}.lst-kix_dab0nnle5hev-3>li:before{content:"\0025cf   "}.lst-kix_dab0nnle5hev-5>li:before{content:"\0025a0   "}.lst-kix_dab0nnle5hev-1>li:before{content:"\0025cb   "}.lst-kix_hibij0os081w-4>li:before{content:"\0025cb   "}.lst-kix_hibij0os081w-8>li:before{content:"\0025a0   "}.lst-kix_hibij0os081w-6>li:before{content:"\0025cf   "}.lst-kix_vf4xolrunyye-8>li:before{content:"\0025a0   "}ul.lst-kix_x6qcfrr4zgr6-1{list-style-type:none}ul.lst-kix_x6qcfrr4zgr6-0{list-style-type:none}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}ul.lst-kix_x6qcfrr4zgr6-5{list-style-type:none}ul.lst-kix_x6qcfrr4zgr6-4{list-style-type:none}ul.lst-kix_x6qcfrr4zgr6-3{list-style-type:none}ul.lst-kix_x6qcfrr4zgr6-2{list-style-type:none}ul.lst-kix_x6qcfrr4zgr6-8{list-style-type:none}ul.lst-kix_x6qcfrr4zgr6-7{list-style-type:none}ul.lst-kix_x6qcfrr4zgr6-6{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c38{border-right-style:solid;border-top-width:0pt;padding-left:0pt;background-color:#ffffff;margin-left:0pt;text-indent:45pt;border-left-style:solid;orphans:2;text-align:left;padding-top:0pt;list-style-position:inside;border-right-width:0pt;padding-bottom:0pt;line-height:1.6;border-left-width:0pt;border-top-style:solid;border-bottom-width:0pt;border-bottom-style:solid;widows:2;padding-right:0pt}.c20{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;page-break-after:avoid;border-left-width:0pt;border-top-style:solid;background-color:#ffffff;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:center;padding-right:0pt}.c14{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:-17.2pt;padding-bottom:0pt;line-height:1.15;border-left-width:0pt;border-top-style:solid;background-color:#ffffff;margin-left:17.2pt;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c112{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:-17.2pt;padding-bottom:0pt;line-height:1.6;border-left-width:0pt;border-top-style:solid;margin-left:17.2pt;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c11{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;border-left-width:0pt;border-top-style:solid;background-color:#ffffff;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c19{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.5;border-left-width:0pt;border-top-style:solid;background-color:#ffffff;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c2{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.0;border-left-width:0pt;border-top-style:solid;background-color:#ffffff;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c37{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.45;border-left-width:0pt;border-top-style:solid;background-color:#ffffff;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c77{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.6;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c55{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:6.9pt;line-height:1.0;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c64{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.71429;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c107{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:center;padding-right:0pt}.c108{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:5.1pt;line-height:1.0;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;orphans:2;widows:2;text-align:left;padding-right:0pt}.c25{border-right-style:solid;padding-top:0pt;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.0;border-left-width:0pt;border-top-style:solid;background-color:#ffffff;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;text-align:left;padding-right:0pt}.c17{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#ffffff;border-left-style:solid;border-bottom-width:1pt;width:451.4pt;border-top-color:#000000;border-bottom-style:solid}.c13{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:middle;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;background-color:#ffffff;border-left-style:solid;border-bottom-width:1pt;width:340.5pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c34{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:middle;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;background-color:#ffffff;border-left-style:solid;border-bottom-width:1pt;width:168.9pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c43{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:bottom;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;background-color:#ffffff;border-left-style:solid;border-bottom-width:1pt;width:84pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c61{border-right-style:solid;border-top-width:0pt;border-right-width:0pt;padding-left:0pt;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;border-bottom-style:solid;padding-right:0pt}.c95{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:bottom;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:118.5pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c81{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:bottom;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:211.5pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c69{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:bottom;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:111pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c72{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:middle;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:136.5pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c94{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:bottom;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:182.7pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c87{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:500pt;border-top-color:#000000;border-bottom-style:solid}.c59{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:middle;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:211.5pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c70{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:middle;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:111pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c78{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:bottom;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:102.8pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c66{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:middle;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:99.7pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c110{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:bottom;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:168.9pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c113{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:bottom;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:146.2pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c106{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:451.4pt;border-top-color:#000000;border-bottom-style:solid}.c111{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:bottom;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:340.5pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c98{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:bottom;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:99.7pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c101{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:middle;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:146.2pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c71{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:middle;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:182.7pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c82{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:middle;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:84pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c60{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:middle;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:102.8pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c75{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:middle;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:118.5pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c114{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#e3e3e3;border-top-width:1pt;border-right-width:1pt;border-left-color:#e3e3e3;vertical-align:bottom;border-right-color:#e3e3e3;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:136.5pt;border-top-color:#e3e3e3;border-bottom-style:solid}.c8{-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-size:12pt;font-family:"Roboto";font-style:normal}.c49{-webkit-text-decoration-skip:none;color:#0000ee;font-weight:400;text-decoration:underline;text-decoration-skip-ink:none;font-size:10pt;font-family:"Consolas"}.c0{color:#1f2328;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Consolas";font-style:normal}.c1{color:#0d0d0d;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Roboto";font-style:normal}.c54{color:#0d0d0d;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:16.5pt;font-family:"Roboto";font-style:normal}.c23{background-color:#ffffff;font-size:10pt;font-family:"Consolas";color:#a31515;font-weight:400}.c36{background-color:#ffffff;font-size:10pt;font-family:"Consolas";color:#008000;font-weight:400}.c10{background-color:#e1eaaf;font-size:11pt;font-family:"Consolas";color:#f99b15;font-weight:400}.c12{background-color:#e7e9db;font-size:11pt;font-family:"Consolas";color:#4f424c;font-weight:400}.c40{background-color:#ffffff;font-size:11pt;font-family:"Consolas";color:#a31515;font-weight:400}.c5{background-color:#ffffff;font-size:10pt;font-family:"Consolas";color:#0000ff;font-weight:400}.c15{background-color:#ffffff;font-size:10.5pt;font-family:"Consolas";color:#000000;font-weight:400}.c26{background-color:#e1eaaf;font-size:11pt;font-family:"Consolas";color:#4f424c;font-weight:400}.c9{background-color:#ffffff;font-size:10pt;font-family:"Consolas";color:#000000;font-weight:400}.c30{background-color:#ffffff;font-size:10.5pt;font-family:"Consolas";color:#0000ff;font-weight:400}.c45{background-color:#ffffff;font-size:11pt;font-family:"Consolas";color:#008000;font-weight:400}.c39{background-color:#ffffff;font-size:11pt;font-family:"Consolas";color:#0000ff;font-weight:400}.c97{color:#d6d6dd;text-decoration:none;vertical-align:baseline;font-family:"Consolas";font-style:normal}.c92{font-weight:700;text-decoration:none;vertical-align:baseline;font-size:16.5pt;font-style:normal}.c58{background-color:#e7e9db;font-size:11pt;font-family:"Consolas";color:#48b685}.c42{font-size:10.5pt;font-family:"Courier New";color:#0d0d0d;font-weight:400}.c51{background-color:#ffffff;font-family:"Consolas";color:#a31515;font-weight:400}.c6{font-size:10pt;font-family:"Consolas";color:#1f2328;font-weight:400}.c90{text-decoration:none;vertical-align:baseline;font-size:17pt;font-style:normal}.c48{background-color:#ffffff;color:#0d0d0d;font-weight:400;font-family:"Courier New"}.c93{text-decoration:none;vertical-align:baseline;font-size:13pt;font-style:normal}.c73{font-size:14pt;font-family:"Consolas";color:#0d0d0d;font-weight:700}.c32{margin-left:auto;border-spacing:0;border-collapse:collapse;margin-right:auto}.c18{font-size:12pt;font-family:"Roboto";color:#0d0d0d;font-weight:400}.c24{text-decoration:none;vertical-align:baseline;font-size:12pt;font-style:normal}.c44{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c84{text-decoration:none;vertical-align:baseline;font-size:9.5pt;font-style:normal}.c33{background-color:#999999;color:#ffffff;font-weight:400;font-family:"Roboto Mono"}.c91{text-decoration:none;vertical-align:baseline;font-size:26pt;font-style:normal}.c21{border-spacing:0;border-collapse:collapse;margin-right:auto}.c65{font-size:11.5pt;font-family:"Consolas";color:#0d0d0d;font-weight:700}.c22{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c29{color:#1f1f1f;font-weight:400;font-family:"Arial"}.c57{font-size:10pt;font-family:"Consolas";color:#2b91af}.c85{font-size:13pt;font-family:"Consolas";font-weight:700}.c28{font-family:"Arial";color:#1f1f1f;font-weight:700}.c4{font-family:"Arial";color:#1f2328;font-weight:400}.c86{background-color:#e7e9db;font-family:"Consolas";color:#f99b15}.c103{text-decoration:none;vertical-align:baseline;font-style:normal}.c74{margin-left:0pt;text-indent:45pt;list-style-position:inside}.c56{font-family:"Consolas";color:#000000}.c100{max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c88{font-family:"Consolas";color:#008000}.c67{font-family:"Consolas";color:#0000ee}.c76{font-family:"Courier New";color:#1f1f1f}.c47{padding:0;margin:0}.c27{color:inherit;text-decoration:inherit}.c35{height:12pt}.c31{page-break-after:avoid}.c41{margin-left:18pt}.c83{color:#0d0d0d}.c62{height:70.8pt}.c3{height:52.8pt}.c7{height:34.8pt}.c96{font-family:"Arial"}.c63{font-size:10.5pt}.c80{background-color:#f6f8fa}.c102{font-family:"Consolas"}.c79{font-family:"Courier New"}.c16{margin-left:36pt}.c46{margin-left:-15pt}.c50{height:0pt}.c104{height:88.8pt}.c53{background-color:#ffffff}.c68{font-size:11pt}.c89{font-family:"Roboto"}.c105{color:#666666}.c52{font-weight:400}.c99{color:#000000}.c109{color:#2b91af}.title{padding-top:0pt;color:#0d0d0d;font-size:26pt;padding-bottom:3pt;font-family:"Roboto";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#0d0d0d;font-size:12pt;font-family:"Roboto"}p{margin:0;color:#0d0d0d;font-size:12pt;font-family:"Roboto"}h1{padding-top:20pt;color:#0d0d0d;font-size:20pt;padding-bottom:6pt;font-family:"Roboto";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{border-right-style:solid;color:#1f1f1f;border-top-width:0pt;font-weight:700;padding-left:0pt;font-size:17pt;background-color:#ffffff;border-left-style:solid;font-family:"Arial";orphans:2;text-align:left;padding-top:0pt;border-right-width:0pt;padding-bottom:0pt;line-height:1.15;page-break-after:avoid;border-left-width:0pt;border-top-style:solid;border-bottom-width:0pt;border-bottom-style:solid;widows:2;padding-right:0pt}h3{border-right-style:solid;color:#0d0d0d;border-top-width:0pt;font-weight:700;padding-left:0pt;font-size:16.5pt;background-color:#ffffff;border-left-style:solid;font-family:"Roboto";orphans:2;text-align:left;padding-top:0pt;border-right-width:0pt;padding-bottom:0pt;line-height:1.6;page-break-after:avoid;border-left-width:0pt;border-top-style:solid;border-bottom-width:0pt;border-bottom-style:solid;widows:2;padding-right:0pt}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Roboto";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Roboto";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Roboto";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c53 c100 doc-content"><p class="c20 title" id="h.yvrzv165kyhx"><span class="c83 c89 c52 c91">Creating Complex 3D Model Graphs with AnchorSCAD </span></p><p class="c11"><span class="c1">by Gianni Mariani 11-Feb-2024</span></p><p class="c11"><span class="c1">AnchorSCAD provides an entire workflow for building 3D models. By using Python you get to leverage powerful IDEs including AI tools like github copilot to complement your model building journey. By employing the &ldquo;class is a shape&rdquo; paradigm, adding special features to your models becomes simpler, like special anchor functions or other specialised shape specific functionality.</span></p><p class="c11"><span class="c1">AnchorSCAD empowers you with a complete software development ecosystem. This means you can leverage code reusability, maintain version control, and enjoy the ease of testing and debugging your designs. Imagine building modular components that seamlessly integrate into your grand vision, all within a framework that promotes clean code and efficient development.</span></p><p class="c11"><span class="c1">There are a number of key components that make the AnchorSCAD ecosystem unique that all work together to minimise code duplication and help you concentrate on building models.</span></p><ul class="c47 lst-kix_uhggez9xp83g-0 start"><li class="c11 c16 li-bullet-0"><span class="c1">Anchors - AnchorSCAD&rsquo;s anchors are static specifiers and evaluated at model build time and can reference any part of the model graph and is easily extensible by just adding an annotated function.</span></li><li class="c11 c16 li-bullet-0"><span class="c1">Parametric complexity simplification - AnchorSCAD uses an extension to Python&rsquo;s dataclasses (see datatrees) that allows you to inject and bind parameters. This not only simplifies code but also makes it more resilient to parameter changes from shapes that your code depends on.</span></li><li class="c11 c16 li-bullet-0"><span class="c1">Every AnchorSCAD module is a library and a model generator. The anchorscad_main() function used in every AnchorSCAD module will render all the @shape class objects in a module and it will generate all the requested resources which include path, datatree field binding documentation and a visual representation of the model graph.</span></li><li class="c11 c16 li-bullet-0"><span class="c1">AnchorSCAD also has a batch tool that will recursively traverse a directory and generate all the example models and associated STL and 3MF files.</span></li><li class="c11 c16 li-bullet-0"><span>AnchorSCAD has multi-material support. Working around OpenSCAD&rsquo;s lack of support for multi-material models, AnchorSCAD is able to utilise OpenSCAD&rsquo;s &ldquo;lazy union&rdquo; feature in its most recent builds that allows multi-model 3MF files to contain separate models for each material.</span></li></ul><p class="c11 c35"><span class="c24 c29"></span></p><p class="c25"><span class="c8"><a class="c27" href="#h.dd1wpz2j0w90">Building a Model Graph</a></span></p><p class="c25 c35 c41"><span class="c8"></span></p><p class="c25"><span class="c8"><a class="c27" href="#h.8n3wz040kyag">Anchors: Navigating Your AnchorSCAD Model</a></span></p><p class="c25 c41"><span class="c8"><a class="c27" href="#h.vxm9ediqhi3y">Anatomy of an Anchor</a></span></p><p class="c25 c41"><span class="c8"><a class="c27" href="#h.xfolsxsms0s7">Core Shape Anchor Functions</a></span></p><p class="c25 c41"><span class="c8"><a class="c27" href="#h.g6qbp68l1awl">Customising Anchors with the @anchor Annotation</a></span></p><p class="c25"><span class="c8"><a class="c27" href="#h.7w0f9846dojm">Building Model Graphs</a></span></p><p class="c25 c41"><span class="c8"><a class="c27" href="#h.3zny7tkh9f94">Class Relationship Diagram</a></span></p><p class="c25 c41"><span class="c8"><a class="c27" href="#h.ahy1txepzgx0">Table 1: Class Inheritance for Core Classes</a></span></p><p class="c25 c41"><span class="c8"><a class="c27" href="#h.ovosawnua9n7">Table 2: Instance Functions and Relations</a></span></p><p class="c25 c41"><span class="c8"><a class="c27" href="#h.vmyont8is7vh">Shape Operator Functions</a></span></p><p class="c25 c35 c41"><span class="c8"></span></p><p class="c25 c41"><span class="c8"><a class="c27" href="#h.jycg25byb6un">Table 3: NamedShape Attributes</a></span></p><p class="c25 c41"><span class="c8"><a class="c27" href="#h.gx26epikxzk4">Step-by-Step Guide</a></span></p><p class="c25 c16"><span class="c8"><a class="c27" href="#h.x5gwjwk7ktpi">Step 1: Creating a Basic Shape</a></span></p><p class="c25 c16"><span class="c8"><a class="c27" href="#h.11dg51i08lkf">Step 2: Naming and Modifying Attributes</a></span></p><p class="c25 c16"><span class="c8"><a class="c27" href="#h.heptlxplt4kz">Step 3: Defining the Frame of Reference Generates a Maker</a></span></p><p class="c25 c16"><span class="c8"><a class="c27" href="#h.vlld1qmj315h">Step 4: Adding Shapes to the Maker</a></span></p><p class="c25 c41"><span class="c8"><a class="c27" href="#h.qo16xrrrwbk6">Understanding Anchors</a></span></p><p class="c25 c41"><span class="c8"><a class="c27" href="#h.lvfvwr12xhmn">Creating Complex Model Hierarchies</a></span></p><p class="c25"><span class="c44 c52"><a class="c27" href="#h.jacs8upk670t">Datatrees</a></span></p><p class="c25 c41"><span class="c44"><a class="c27" href="#h.t7lq29ohtkab">Introducing datatrees</a></span></p><p class="c25 c41"><span class="c44"><a class="c27" href="#h.5c8kaomwyafz">Field injection and Field binding</a></span></p><p class="c16 c25"><span class="c44"><a class="c27" href="#h.ozofdz3pzv33">Datatree Wraps Dataclass</a></span></p><p class="c25 c41"><span class="c44"><a class="c27" href="#h.8czps2w9u57k">Help for Class A</a></span></p><p class="c25 c41"><span class="c44"><a class="c27" href="#h.3i0ra53l677d">Datatree Inject and Bind</a></span></p><p class="c25 c16"><span class="c44"><a class="c27" href="#h.bwsluz94maz">Injected Fields</a></span></p><p class="c25 c41"><span class="c44"><a class="c27" href="#h.cv88s0fgldjc">Example of field binding,</a></span></p><p class="c25 c41"><span class="c44"><a class="c27" href="#h.692bimoliw3f">Example of overriding the field binding.</a></span></p><p class="c25 c41"><span class="c44"><a class="c27" href="#h.2pystbkm0pq7">Binding Parameters In self default Fields</a></span></p><p class="c25 c41"><span class="c44"><a class="c27" href="#h.xcjdt3qxeso4">Injecting Computed Defaults</a></span></p><p class="c25 c41"><span class="c44"><a class="c27" href="#h.t239kjpx44ew">Injecting Function Parameters</a></span></p><p class="c25 c41"><span class="c44"><a class="c27" href="#h.4uit21mf1804">Inheritance with Datatrees</a></span></p><p class="c25 c41"><span class="c44"><a class="c27" href="#h.f1g1trrrtgql">Mapping Injected Names with a Prefix or Suffix</a></span></p><p class="c25 c41"><span class="c44"><a class="c27" href="#h.8ybk8kqyve7x">Override</a></span></p><p class="c25 c41"><span class="c44"><a class="c27" href="#h.qg6j8sexkdev">Hole Gauge Example</a></span></p><p class="c25 c41"><span class="c44"><a class="c27" href="#h.mfp7s48i04ka">From: hole_guage</a></span></p><p class="c11 c35"><span class="c24 c29"></span></p><h2 class="c11 c31" id="h.dd1wpz2j0w90"><span class="c90 c28">Building a Model Graph</span></h2><p class="c11"><span class="c29 c53">This section introduces shapes, makers, and composite shapes - the fundamental building blocks that form the foundation of your 3D creations within AnchorSCAD.</span></p><p class="c11"><span class="c24 c28">Foundation Elements:</span></p><ul class="c47 lst-kix_z1bpybpak2qw-0 start"><li class="c11 c16 li-bullet-0"><span class="c28">Shape:</span><span class="c24 c29">&nbsp;The basic building block representing a single 3D geometric entity.</span></li><li class="c11 c16 li-bullet-0"><span class="c28">NamedShape:</span><span class="c24 c29">&nbsp;A container assigning a name to a Shape, enabling easy referencing within the model.</span></li><li class="c11 c16 li-bullet-0"><span class="c28">Maker:</span><span class="c24 c29">&nbsp;The central class used to construct and manipulate shapes.</span></li><li class="c11 c16 li-bullet-0"><span class="c28">CompositeShape:</span><span class="c24 c29">&nbsp;A powerful tool allowing you to group multiple shapes and assign transformations, creating complex structures.</span></li></ul><p class="c11"><span class="c24 c28">Shape Modifiers:</span></p><ul class="c47 lst-kix_zayd0muvexxh-0 start"><li class="c11 c16 li-bullet-0"><span class="c28">solid():</span><span class="c24 c29">&nbsp;Defines the main body of a solid shape.</span></li><li class="c11 c16 li-bullet-0"><span class="c28">hole():</span><span class="c24 c29">&nbsp;Creates a cutout within a solid, defining internal cavities.</span></li><li class="c11 c16 li-bullet-0"><span class="c28">cage():</span><span class="c24 c29">&nbsp;Generates a wireframe representation of a shape.</span></li><li class="c11 c16 li-bullet-0"><span class="c28">composite():</span><span class="c24 c29">&nbsp;Groups multiple shapes under the CompositeShape class, enabling transformations and hierarchical organization.</span></li><li class="c11 c16 li-bullet-0"><span class="c28">hull():</span><span class="c24 c29">&nbsp;Creates a convex hull encompassing all input shapes.</span></li><li class="c11 c16 li-bullet-0"><span class="c28">minkowski():</span><span class="c24 c29">&nbsp;Performs a set difference between two shapes.</span></li><li class="c11 c16 li-bullet-0"><span class="c28">intersect():</span><span class="c24 c29">&nbsp;Creates the intersection volume between two shapes.</span></li></ul><p class="c11"><span class="c24 c28">Key Points:</span></p><ul class="c47 lst-kix_d0wm6b2t7nsb-0 start"><li class="c11 c16 li-bullet-0"><span class="c29">Each Shape class can define custom anchor functions using the </span><span class="c76 c52">@anchor</span><span class="c24 c29">&nbsp;annotation, tailoring reference points to your specific needs.</span></li><li class="c11 c16 li-bullet-0"><span class="c24 c29">Anchors play a crucial role in building organized and well-defined models, especially when dealing with complex hierarchies.</span></li></ul><p class="c11 c35"><span class="c1"></span></p><p class="c11"><span class="c18">Creating a model hierarchy in AnchorSCAD is based on the concepts behind the </span><span class="c65">Shape</span><span class="c85 c83">, </span><span class="c65">NamedShape</span><span class="c85 c83">, </span><span class="c65">Maker</span><span class="c83 c85">&nbsp;</span><span>and </span><span class="c65">CompositeShape</span><span class="c18">&nbsp;classes and the various </span><span class="c18 c53">shape modifiers, </span><span class="c65 c53">solid()</span><span class="c53 c73">, </span><span class="c65 c53">hole()</span><span class="c73 c53">, </span><span class="c65 c53">cage()</span><span class="c73 c53">, </span><span class="c65 c53">composite()</span><span class="c73 c53">, </span><span class="c65 c53">hull()</span><span class="c73 c53">, </span><span class="c65 c53">minkowski()</span><span class="c18 c53">&nbsp;and </span><span class="c65 c53">intersect()</span><span class="c1">. The positioning of shapes within a Maker uses &ldquo;anchors&rdquo;. Each Shape class can define @anchor functions that can be used to define shape specific functions to locate points on the shape. </span></p><p class="c11"><span class="c1">The AnchorSCAD API is designed to minimise the possibility of producing illegal model graphs. The API also uses chaining where appropriate to help maintain backwards compatibility as more features are added. The example below shows the construction of &ldquo;Maker&rdquo;, a node in the model graph using the Cone shape, applying the &ldquo;solid&rdquo; operator, setting the colour and material attributes. Finally, the &ldquo;at()&rdquo; function provides the transformation that is used to align the graph node with the graph it is being added to. </span></p><p class="c11"><span>The following code demonstrates the creation of &nbsp;Maker objects (which are graph nodes). It constructs</span><span class="c29">&nbsp;a 3D model consisting of a cone with a sphere placed on its top. The sphere has 6 cylindrical holes evenly distributed around its circumference. </span><span class="c1">The colour and material calls are optional and shown to illustrate how node attributes are applied.</span></p><a id="t.73162783a2d46e0c1bab415ac49a08847028219a"></a><a id="t.0"></a><table class="c21"><tr class="c50"><td class="c106" colspan="1" rowspan="1"><p class="c22 c61"><span class="c39">from</span><span class="c56 c53 c68 c52">&nbsp;anchorscad </span><span class="c39">import</span><span class="c56 c53 c68 c52">&nbsp;Cone, Material, Sphere, Cylinder<br><br></span><span class="c45"># Create a Cone shape with height (h), base radius (r_base),</span><span class="c56 c53 c68 c52"><br></span><span class="c45"># and top radius (r_top) with chaining to set additional</span><span class="c56 c53 c68 c52"><br></span><span class="c45"># properties and specify the frame of reference</span><span class="c56 c53 c68 c52"><br><br>graph_maker = Cone(h=20, r_base=10, r_top=5) \<br> &nbsp; &nbsp;.solid(</span><span class="c40">&#39;MyCone&#39;</span><span class="c56 c53 c68 c52">) \<br> &nbsp; &nbsp;.colour(</span><span class="c40">&#39;blue&#39;</span><span class="c56 c53 c68 c52">) \<br> &nbsp; &nbsp;.material(Material(</span><span class="c40">&#39;PLA&#39;</span><span class="c56 c53 c68 c52">)) \<br> &nbsp; &nbsp;.at(</span><span class="c40">&quot;base&quot;</span><span class="c56 c53 c68 c52">)<br><br></span><span class="c45"># Create a Sphere the name radius as the top radius of the Cone.</span><span class="c56 c53 c68 c52"><br>sphere_maker = Sphere(r=5) \<br> &nbsp; &nbsp;.solid(</span><span class="c40">&#39;MySphere&#39;</span><span class="c56 c53 c68 c52">) \<br> &nbsp; &nbsp;.at(</span><span class="c40">&#39;centre&#39;</span><span class="c56 c53 c68 c52">)<br><br>graph_maker.add_at(sphere_maker, </span><span class="c40">&#39;top&#39;</span><span class="c56 c53 c68 c52 c103">)</span></p><p class="c61 c22"><span class="c56 c53 c68 c52"><br></span><span class="c45"># Place 6 holes on the circumference of MyShpere.</span><span class="c56 c53 c52 c68"><br>cylinder_shape = Cylinder(r=1.2, h=5)<br>n = 6<br></span><span class="c39">for</span><span class="c56 c53 c68 c52">&nbsp;i </span><span class="c39">in</span><span class="c56 c53 c68 c52">&nbsp;range(n):<br> &nbsp; &nbsp;graph_maker.add_at(<br> &nbsp; &nbsp; &nbsp; &nbsp;cylinder_shape.hole((hole, i)).at(</span><span class="c40">&#39;base&#39;</span><span class="c56 c53 c68 c52">),<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c40">&#39;MySphere&#39;</span><span class="c56 c53 c68 c52">, </span><span class="c40">&#39;surface&#39;</span><span class="c56 c53 c68 c52">, (i / n * 360, 0))</span></p></td></tr></table><ul class="c47 lst-kix_vf4xolrunyye-0 start"><li class="c38 c31"><h3 id="h.pi4rl2ogv2y9" style="display:inline"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 599.55px; height: 332.85px;"><img alt="" src="images/image4.png" style="width: 599.55px; height: 332.85px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></h3></li></ul><p class="c11"><span>While you can render the OpenSCAD code using </span><span class="c6 c80">print(ad.render(maker).rendered_shape)</span><span class="c1">, it&rsquo;s much easier to use a CompositeShape, see the examples below.</span></p><h2 class="c11" id="h.8n3wz040kyag"><span>Anchors: Navigating Your AnchorSCAD Model</span></h2><p class="c11"><span class="c24 c29">As the name suggests, AnchorSCAD has a versatile mechanism for defining placement of shapes relative to each other. Quite simply, an anchor resolves to a 4x4 transformation matrix. It is a frame of reference. When adding two shapes, the nominated anchors are aligned and the resulting transformation to perform that alignment is used as the graph. </span></p><p class="c11"><span class="c24 c29">Perhaps the most important feature of anchors is that they are statically specified and can be supplied as a parameter. This allows for separation of the model building code from the design constraints. Additionally anchors </span></p><p class="c11"><span class="c29">Below is an example of an anchor. The </span><span class="c58 c52">&#39;shell&#39;</span><span class="c29">&nbsp;component nominates the name of the shape being selected, this happens to be a Box shape. </span><span class="c58 c52">&#39;face_edge&#39;</span><span class="c29">&nbsp;is the anchor function on the Box shape and it takes 3 parameters, face, edge, and relative position on the edge which corresponds to </span><span class="c86 c68 c52">&#39;</span><span class="c10">front</span><span class="c86 c68 c52">&#39;</span><span class="c26">, </span><span class="c10">1</span><span class="c26">, </span><span class="c10">0.15</span><span class="c24 c29">&nbsp;finally, an arbitrary post multiplied transformation is applied that translates the anchor up the Z axis by epsilon.</span></p><p class="c53 c107"><span class="c29"><br></span><span class="c96 c68 c52 c99">&nbsp;</span><span class="c52 c58">&#39;shell&#39;</span><span class="c12">, </span><span class="c58 c52">&#39;face_edge&#39;</span><span class="c12">, </span><span class="c68 c52 c86">&#39;</span><span class="c10">front</span><span class="c86 c68 c52">&#39;</span><span class="c26">, </span><span class="c10">1</span><span class="c26">, </span><span class="c10">0.15</span><span class="c12">, post=tranZ(epsilon)</span></p><h3 class="c11" id="h.vxm9ediqhi3y"><span class="c93 c28">Anatomy of an Anchor</span></h3><p class="c11"><span class="c24 c29">An anchor consists of several key components:</span></p><ul class="c47 lst-kix_x6qcfrr4zgr6-0 start"><li class="c11 c16 li-bullet-0"><span class="c76 c52">&lt;path&gt;</span><span class="c24 c29">: A sequence of names that represents the path through the model hierarchy, leading to the desired location. Each name in the path refers to a shape or group within your model.</span></li><li class="c11 c16 li-bullet-0"><span class="c76 c52">&lt;function&gt;</span><span class="c24 c29">: The name of the shape function at the end of the path. This function defines the type of shape you&#39;re referencing.</span></li><li class="c11 c16 li-bullet-0"><span class="c76 c52">&lt;parameters&gt;</span><span class="c24 c29">: Parameters specific to the chosen shape function, further pinpointing the exact reference point within the shape.</span></li><li class="c11 c16 li-bullet-0"><span class="c52 c76">pre</span><span class="c24 c29">: Optional parameters specifying a pre-multiply transformation.</span></li><li class="c11 c16 li-bullet-0"><span class="c76 c52">post</span><span class="c24 c29">: Optional parameters specifying a post-multiply transformation.</span></li></ul><p class="c11 c35"><span class="c24 c29"></span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 345.85px;"><img alt="" src="images/image2.png" style="width: 601.70px; height: 345.85px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h3 class="c11" id="h.xfolsxsms0s7"><span class="c28 c93">Core Shape Anchor Functions</span></h3><p class="c11"><span class="c29">Each shape will define anchor functions that are semantically appropriate, for example Box has &lsquo;face_corner&rsquo;, &lsquo;face_edge&rsquo;, &lsquo;face_centre&rsquo; and &lsquo;centre&rsquo; while Cylinder has anchors &lsquo;top&rsquo;, &lsquo;base&rsquo;, &lsquo;surface&rsquo; and &lsquo;centre&rsquo;. Each Core shape has examples rendered with anchors displayed. Here is Cone example render showing the &lsquo;top&rsquo; and &lsquo;surface&rsquo; anchors with various parameters:<br><br></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 593.50px; height: 436.90px;"><img alt="" src="images/image5.png" style="width: 593.50px; height: 436.90px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11"><span class="c24 c29">By convention, anchors should have the Z axis pointing away from the shape and normal to the surface unless otherwise specified. Note the &lsquo;surface&rsquo; parameter &lsquo;tangent&rsquo; is used to determine the orientation of the anchor, either it is normal to the cone surface or if &lsquo;tangent&rsquo; is false, it aligns the Y axis with the cone&rsquo;s central axis.</span></p><h3 class="c77 c31 c53" id="h.g6qbp68l1awl"><span class="c54">Customising Anchors with the @anchor Annotation</span></h3><p class="c11"><span class="c29">While core shapes offer predefined functions, you can create custom anchor functions for shape classes (including </span><span class="c76 c52">CompositeShape</span><span class="c29">) using the </span><span class="c76 c52">@anchor</span><span class="c24 c29">&nbsp;annotation. This allows you to define specific reference points relevant to your custom shapes.</span></p><p class="c11"><span class="c29">Below is an example of an anchor defined in the </span><span class="c44 c52 c96"><a class="c27" href="https://www.google.com/url?q=https://github.com/owebeeone/anchorscad/blob/5f8738ae5944c2e1fd192b1166349ce7734a3ab4/src/anchorscad/models/basic/pipe.py%23L43&amp;sa=D&amp;source=editors&amp;ust=1707654020146163&amp;usg=AOvVaw0cgGMx53LlP1xhFqwbPkpy">Pipe class</a></span><span class="c24 c29">. The inner cylinder of a pipe is a hole and by definition, the normal direction is different. Hence we create an &ldquo;inner_surface&rdquo; anchor function that flips the direction by rotating the resultant 4x4 matrix by a rotation around the X axis of 180 degrees.</span></p><a id="t.0383f5b4c6df23f6e7aa15906473732fc1a1f9d5"></a><a id="t.1"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c61 c22"><span class="c63 c102 c53 c52 c109">@anchor(&#39;inner surface anchor&#39;)</span><span class="c15"><br></span><span class="c30">def</span><span class="c15">&nbsp;</span><span class="c51 c63">inner_surface</span><span class="c15">(self, *args, **kwds):<br> &nbsp; &nbsp;</span><span class="c51 c63">&#39;&#39;&#39;Inner surface anchor with corrected Z points away from surface.&#39;&#39;&#39;</span><span class="c15"><br> &nbsp; &nbsp;</span><span class="c30">return</span><span class="c15">&nbsp;self.maker.at(</span><span class="c51 c63">&#39;inner&#39;</span><span class="c15">, </span><span class="c51 c63">&#39;surface&#39;</span><span class="c15">, *args, **kwds) * ad.ROTX_180<br></span></p></td></tr></table><p class="c11 c35"><span class="c24 c29 c53"></span></p><p class="c11"><span>This is an &ldquo;EXAMPLE_ANCHORS&rdquo; render for the &ldquo;inner_surface&rdquo; anchor specified in the </span><span class="c44"><a class="c27" href="https://www.google.com/url?q=https://github.com/owebeeone/anchorscad/blob/5f8738ae5944c2e1fd192b1166349ce7734a3ab4/src/anchorscad/models/basic/pipe.py%23L30&amp;sa=D&amp;source=editors&amp;ust=1707654020147530&amp;usg=AOvVaw1Idt0plMLnuM3VfyqeAy-F">basic/pipe.py</a></span><span class="c24 c29 c53">&nbsp;model.</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 525.50px; height: 367.68px;"><img alt="" src="images/image1.png" style="width: 525.50px; height: 367.68px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><ul class="c47 lst-kix_vf4xolrunyye-0"><li class="c11 c31 c74"><h2 id="h.7w0f9846dojm" style="display:inline"><span class="c90 c28">Building Model Graphs</span></h2></li><li class="c11 c74"><span>AnchorSCAD employs </span><span class="c44"><a class="c27" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Method_chaining&amp;sa=D&amp;source=editors&amp;ust=1707654020148066&amp;usg=AOvVaw0hXAQNBMguK7hNk21VpUlz">method chaining </a></span><span>to specify nodes in the model graph. This reduces the chance of making errors but also makes for a flexible API. However, this requires more classes to implement the API. AnchorSCAD also uses the builder pattern, called &ldquo;Maker&rdquo; and are only generated as a result of a sequence of calls to &ldquo;shape operator&rdquo;, optional attributes and given a default frame of reference. This section describes these concepts.</span></li><li class="c38 c31"><h3 id="h.3zny7tkh9f94" style="display:inline"><span class="c54">Class Relationship Diagram</span></h3></li><li class="c14 li-bullet-1"><span class="c1">The essential AnchorSCAD core class relationships are shown in the diagram below. Central to AnchorSCAD is the Shape class. The shape class is the parent class to many AnchorSCAD types, concrete types like Box, Cylinder etc as well as model hierarchy like CompositeShape and Maker.</span></li><li class="c11 c74 c35"><span class="c1"></span></li><li class="c11 c74"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 677.68px; height: 347.85px;"><img alt="" src="images/image3.png" style="width: 677.68px; height: 347.85px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c38 c31"><h3 id="h.ahy1txepzgx0" style="display:inline"><span class="c54">Table 1: Class Inheritance for Core Classes</span></h3></li></ul><a id="t.7501352478c918ba9d13b5e46e8a16b7afb37aee"></a><a id="t.2"></a><table class="c21"><tr class="c7"><td class="c53 c114" colspan="1" rowspan="1"><p class="c2"><span class="c1">Subclass</span></p></td><td class="c53 c78" colspan="1" rowspan="1"><p class="c2"><span class="c1">Inherits From</span></p></td><td class="c53 c81" colspan="1" rowspan="1"><p class="c2"><span class="c1">Description</span></p></td></tr><tr class="c3"><td class="c53 c72" colspan="1" rowspan="1"><p class="c2"><span class="c1">Box, Cone, Cylinder, Sphere, Text</span></p></td><td class="c60 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Shape</span></p></td><td class="c53 c59" colspan="1" rowspan="1"><p class="c2"><span class="c1">Basic shapes inherit directly from Shape.</span></p></td></tr><tr class="c3"><td class="c72 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Arrow, Coordinates, AnnotatedCoordinates</span></p></td><td class="c60 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">CompositeShape</span></p></td><td class="c59 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Specialised composite shapes.</span></p></td></tr><tr class="c7"><td class="c72 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Maker</span></p></td><td class="c60 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Shape</span></p></td><td class="c59 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Builder of nodes in the model graph. Shapes added can be solid, hole etc</span></p></td></tr><tr class="c3"><td class="c72 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">CompositeShape</span></p></td><td class="c60 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Shape</span></p></td><td class="c59 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">A shape composed of other shapes.</span></p></td></tr><tr class="c3"><td class="c72 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">NamedShape</span></p></td><td class="c53 c60" colspan="1" rowspan="1"><p class="c2"><span class="c1">-</span></p></td><td class="c59 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">For applying attributes (colour, material etc) and frame of reference to project to.</span></p></td></tr></table><ul class="c47 lst-kix_vf4xolrunyye-0"><li class="c38 c31"><h3 id="h.ovosawnua9n7" style="display:inline"><span class="c54">Table 2: Instance Functions and Relations</span></h3></li></ul><a id="t.54fb497aa658d616fc8ca1a066d3359f85f39091"></a><a id="t.3"></a><table class="c21"><tr class="c7"><td class="c53 c113" colspan="1" rowspan="1"><p class="c2"><span class="c1">Function</span></p></td><td class="c78 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Source Class</span></p></td><td class="c43" colspan="1" rowspan="1"><p class="c2"><span class="c1">Target Class</span></p></td><td class="c53 c95" colspan="1" rowspan="1"><p class="c2"><span class="c1">Description</span></p></td></tr><tr class="c104"><td class="c53 c101" colspan="1" rowspan="1"><p class="c2"><span class="c1">solid(name), hole(name), cage(name), composite(name), intersect(name), hull(name), minkowski(name)</span></p></td><td class="c60 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Shape</span></p></td><td class="c53 c82" colspan="1" rowspan="1"><p class="c2"><span class="c1">NamedShape</span></p></td><td class="c53 c75" colspan="1" rowspan="1"><p class="c2"><span class="c1">Allows specifying modifiers (colour, material etc) for the subnodes.</span></p></td></tr><tr class="c3"><td class="c101 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">build(self) -&gt; Maker</span></p></td><td class="c60 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">CompositeShape</span></p></td><td class="c82 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Maker</span></p></td><td class="c75 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Abstract function build() called on instance initialization returns a Maker representing the Shape.</span></p></td></tr><tr class="c3"><td class="c101 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">add_at(maker, anchor, pre, post) -&gt; self</span></p></td><td class="c60 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Maker</span></p></td><td class="c82 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Maker</span></p></td><td class="c75 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Adds model graph node (Maker) at a specified anchor.</span></p></td></tr></table><ul class="c47 lst-kix_vf4xolrunyye-0"><li class="c31 c38"><h3 id="h.vmyont8is7vh" style="display:inline"><span class="c54">Shape Operator Functions</span></h3></li><li class="c14 li-bullet-2"><span class="c1">The shape operator functions in AnchorSCAD require a name parameter that can be any representable (repr-izable), hashable object. This flexibility allows for a wide range of identifiers, commonly strings or tuples of strings and integers. These identifiers serve as unique references to shapes within a node of a model, facilitating their manipulation and interaction.</span></li><li class="c14 li-bullet-1"><span class="c1">Shape modifier functions return a NamedShape. NamedShape allows application of attributes to the model graph node and is used to build a Maker object, a model graph node builder. The shape used to build the Maker is the primary shape for the node. When processing anchors, the primary node&rsquo;s anchors do not need to be qualified with the name provided to the shape operator. </span></li></ul><a id="t.2d23e97363cc10a739291859f96e0f43837b910b"></a><a id="t.4"></a><table class="c21"><tr class="c3"><td class="c53 c69" colspan="1" rowspan="1"><p class="c11"><span class="c1">Modifier Function</span></p></td><td class="c53 c111" colspan="1" rowspan="1"><p class="c11"><span class="c1">Description</span></p></td></tr><tr class="c3"><td class="c70 c53" colspan="1" rowspan="1"><p class="c11"><span class="c1">solid(name)</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c11"><span class="c1">Indicates the shape is represented as a solid. If the subgraph has any holes, they are applied and the resulting shape collapses into the representative solid.</span></p></td></tr><tr class="c3"><td class="c53 c70" colspan="1" rowspan="1"><p class="c11"><span class="c1">hole(name)</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c11"><span class="c1">Designates the shape as a hole, implying that it should be subtracted from other solids added to this node. Any holes within the node are collapsed and the remaining solid (if any) is transformed into a hole.</span></p></td></tr><tr class="c3"><td class="c70 c53" colspan="1" rowspan="1"><p class="c11"><span class="c1">cage(name)</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c11"><span class="c1">The shape is not rendered (nor hole or solid) but anchors are available. It&rsquo;s a way to adopt anchors from a shape but not actually rendering the shape.</span></p></td></tr><tr class="c3"><td class="c70 c53" colspan="1" rowspan="1"><p class="c11"><span class="c1">composite(name)</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c11"><span class="c1">The subgraph node shapes are elevated into the current node and holes and solids are preserved. This allows shapes to be composed of &ldquo;holes&rdquo; and &ldquo;solids&rdquo;. It avoids collapsing holes prematurely. Example is when combining pipes, pipes consist of a &ldquo;solid&rdquo; cylinder and a &ldquo;hole&rdquo; cylinder. Adding a pipe to a parent node with this modifier ensures that the pipe&rsquo;s holes remain holes.</span></p></td></tr><tr class="c3"><td class="c70 c53" colspan="1" rowspan="1"><p class="c11"><span class="c1">intersect(name)</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c11"><span class="c1">Intersects any solid elements within the contained node.</span></p></td></tr><tr class="c3"><td class="c70 c53" colspan="1" rowspan="1"><p class="c11"><span class="c1">hull(name)</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c11"><span class="c1">Applies a convex hull operation to the shape or group of shapes within this node.</span></p></td></tr><tr class="c62"><td class="c70 c53" colspan="1" rowspan="1"><p class="c11"><span class="c1">minkowski(name)</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c11"><span class="c1">Applies the Minkowski operator to the group of shapes within this node.</span></p></td></tr></table><ul class="c47 lst-kix_vf4xolrunyye-0"><li class="c11 c35 c16 li-bullet-0"><span class="c1"></span></li><li class="c14 li-bullet-2"><span class="c1">These functions not only modify the shapes but also define their roles and interactions within the model, enabling the creation of complex 3D models through intuitive operations.</span></li><li class="c35 c31 c53 c112 li-bullet-1"><h3 id="h.913n1e4htbdh" style="display:inline"><span class="c54"></span></h3></li><li class="c112 c31 c53 li-bullet-1"><h3 id="h.jycg25byb6un" style="display:inline"><span class="c54">Table 3: NamedShape Attributes</span></h3></li></ul><a id="t.362248f8a4d50bb8f5881aa6bcc6798ea1eeb15a"></a><a id="t.5"></a><table class="c21"><tr class="c7"><td class="c53 c94" colspan="1" rowspan="1"><p class="c2"><span class="c1">Attribute</span></p></td><td class="c53 c98" colspan="1" rowspan="1"><p class="c2"><span class="c1">Type</span></p></td><td class="c53 c110" colspan="1" rowspan="1"><p class="c2"><span class="c1">Description</span></p></td></tr><tr class="c7"><td class="c71 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">colour(rgba)</span></p></td><td class="c66 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">RGBA</span></p></td><td class="c34" colspan="1" rowspan="1"><p class="c2"><span class="c1">Sets the colour of the shape.</span></p></td></tr><tr class="c3"><td class="c71 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">transparent(bool)</span></p></td><td class="c66 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Boolean</span></p></td><td class="c34" colspan="1" rowspan="1"><p class="c2"><span class="c1">Makes the shape transparent or opaque.</span></p></td></tr><tr class="c7"><td class="c71 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">fa(float), fs(float), fn(int)</span></p></td><td class="c53 c66" colspan="1" rowspan="1"><p class="c2"><span class="c1">Various</span></p></td><td class="c34" colspan="1" rowspan="1"><p class="c2"><span class="c1">Maps to openscad $fn, $fa and $fs values.</span></p></td></tr><tr class="c7"><td class="c53 c71" colspan="1" rowspan="1"><p class="c2"><span class="c1">disable(bool)</span></p></td><td class="c66 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Boolean</span></p></td><td class="c34" colspan="1" rowspan="1"><p class="c2"><span class="c1">Disables the shape. Maps to the openscad &lsquo;*&rsquo; operator.</span></p></td></tr><tr class="c7"><td class="c71 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">show_only(bool)</span></p></td><td class="c66 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Boolean</span></p></td><td class="c34" colspan="1" rowspan="1"><p class="c2"><span class="c1">If true, only this shape is shown. Maps to the openscad &lsquo;!&rsquo; operator.</span></p></td></tr><tr class="c3"><td class="c71 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">debug(bool)</span></p></td><td class="c66 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Boolean</span></p></td><td class="c34" colspan="1" rowspan="1"><p class="c2"><span class="c1">Enables debugging mode for the shape. Maps to the openscad &lsquo;#&rsquo; operator.</span></p></td></tr><tr class="c3"><td class="c71 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">use_polyhedrons(bool)</span></p></td><td class="c66 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Boolean</span></p></td><td class="c34" colspan="1" rowspan="1"><p class="c2"><span class="c1">Specifies whether to use polyhedrons or LinearExtrude or RotateExtrude operations.</span></p></td></tr><tr class="c3"><td class="c71 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">material(Material)</span></p></td><td class="c66 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">Material </span></p></td><td class="c34" colspan="1" rowspan="1"><p class="c2"><span class="c1">Specifies the material properties of the shape.</span></p></td></tr><tr class="c3"><td class="c71 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">material_map(MaterialMap)</span></p></td><td class="c66 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">MaterialMap</span></p></td><td class="c34" colspan="1" rowspan="1"><p class="c2"><span class="c1">Applies the mapping for materials in the subtree.</span></p></td></tr><tr class="c62"><td class="c71 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">at(&lt;anchor&gt;, pre, post)</span></p></td><td class="c66 c53" colspan="1" rowspan="1"><p class="c2"><span class="c1">pre=GMatrix</span></p><p class="c2"><span class="c1">post=GMatrix</span></p></td><td class="c34" colspan="1" rowspan="1"><p class="c2"><span class="c1">Specifies positioning of the shape relative to an anchor.</span></p></td></tr></table><ul class="c47 lst-kix_vf4xolrunyye-0"><li class="c11 c35 c16 li-bullet-0"><span class="c1"></span></li><li class="c14 li-bullet-1"><span class="c18">Creating Basic Shapes: Begin by defining basic geometric shapes, such as </span><span class="c42">Box</span><span class="c18">, </span><span class="c42">Cone</span><span class="c18">, </span><span class="c42">Cylinder</span><span class="c1">, etc.</span></li><li class="c14 li-bullet-2"><span class="c1">Naming and Modifying Attributes: After creating a shape, you name it and optionally modify its attributes, such as colour or material.</span></li><li class="c14 li-bullet-1"><span class="c18">Defining the Frame of Reference with </span><span class="c42">at()</span><span class="c18">: Specify the shape&#39;s frame of reference using the </span><span class="c42">at()</span><span class="c1">&nbsp;function, which is crucial for positioning within the model hierarchy.</span></li><li class="c14 li-bullet-1"><span class="c18">Creating a Maker: A </span><span class="c42">Maker</span><span class="c1">&nbsp;serves as a node in the model hierarchy, capable of holding and manipulating shapes.</span></li><li class="c14 li-bullet-1"><span class="c18">Adding Shapes to the Maker: Use the </span><span class="c42">Maker</span><span class="c1">&#39;s functions to add new shapes to the model, defining their relationships and positions through anchors.</span></li></ul><h3 class="c53 c77" id="h.gx26epikxzk4"><span class="c54">Step-by-Step Guide</span></h3><h4 class="c19" id="h.x5gwjwk7ktpi"><span class="c1">Step 1: Creating a Basic Shape</span></h4><p class="c11"><span class="c18">Start by creating a basic shape. This is the foundation of your model.</span></p><a id="t.2c08c34ccd5bb758e3a50d7989c3a0a8ffcbe97e"></a><a id="t.6"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c61 c22"><span class="c88 c53 c52"># Creates a box with dimensions 10x20x30.</span></p><p class="c22"><span class="c56 c53 c52">shape = Box([10, 20, 30]) </span></p></td></tr></table><p class="c64 c35 c53"><span class="c48 c84"></span></p><h4 class="c19" id="h.11dg51i08lkf"><span class="c1">Step 2: Naming and Modifying Attributes</span></h4><p class="c11"><span class="c18">After creating a shape, you can name it and modify its attributes. Naming is crucial for identifying the shape within the model hierarchy.</span></p><a id="t.6fe333e4c557086434b01c03547364df29220f4f"></a><a id="t.7"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c61 c22"><span class="c88 c53 c52"># Names the shape and sets its colour.</span></p><p class="c22"><span class="c56 c53 c52">named_shape = shape.solid(</span><span class="c51">&quot;box&quot;</span><span class="c56 c53 c52">).colour(</span><span class="c51">&quot;red&quot;</span><span class="c56 c53 c52">) </span></p></td></tr></table><p class="c35 c53 c64"><span class="c48 c84"></span></p><h4 class="c19" id="h.heptlxplt4kz"><span class="c83 c52 c89">Step 3: Defining the Frame of Reference </span><span class="c83">Generates a Maker</span></h4><p class="c11"><span class="c18">The </span><span class="c42">at()</span><span class="c1">&nbsp;function specifies the frame of reference for the shape, determining its position within the model hierarchy.</span></p><a id="t.d6c19fc398ad2f913e88fd45f2bbc80159465e4d"></a><a id="t.8"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c53 c52 c88"># Sets the frame of reference for the shape.</span><span class="c56 c53 c52"><br>maker = named_shape.at(</span><span class="c51">&#39;centre&#39;</span><span class="c56 c53 c52">) </span></p></td></tr></table><p class="c11 c35"><span class="c1"></span></p><h4 class="c19" id="h.vlld1qmj315h"><span class="c83 c89 c52">Step </span><span class="c83">4</span><span class="c1">: Adding Shapes to the Maker</span></h4><p class="c11"><span class="c18">Use the </span><span class="c42">Maker</span><span class="c18">&#39;s functions to add </span><span>other Maker&rsquo;s</span><span class="c18">&nbsp;to the model. </span><span>It&rsquo;s notable that a Maker can only accept a Maker to be added. All Shape objects must have a shape operator applied and given a frame of reference for it to be added as a node in a Maker.</span><span class="c18"><br>The </span><span class="c42">add_at()</span><span class="c18">&nbsp;call </span><span>aligns the anchor specified in the</span><span class="c63 c52 c79">&nbsp;</span><span class="c63 c79 c52">other_maker</span><span>&nbsp;and the anchor provided as the second parameter in the </span><span class="c63 c79 c52">add_at()</span><span class="c1">&nbsp;call. This anchor can reference any node currently in the maker&rsquo;s model graph.</span></p><a id="t.7692d94c7596abfcd092ebd1a67174aeccefd022"></a><a id="t.9"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22 c35"><span class="c24 c88 c53 c52"></span></p><p class="c61 c22"><span class="c56 c53 c52">other_maker = Sphere(10).hole(</span><span class="c51">&#39;hole&#39;).at(&#39;centre&#39;)</span></p><p class="c22 c35"><span class="c24 c88 c53 c52"></span></p><p class="c22"><span class="c88 c53 c52"># Adding another shape to the maker at a specific anchor.</span><span class="c53 c52 c56"><br>maker.add_at(other_maker, </span><span class="c51">&quot;face_centre&quot;, &#39;top&#39;</span><span class="c56 c53 c52">)</span></p></td></tr></table><p class="c64 c35 c53"><span class="c48 c84"></span></p><h3 class="c77 c53" id="h.qo16xrrrwbk6"><span class="c54">Understanding Anchors</span></h3><p class="c11"><span class="c18">Anchors define specific points or </span><span>specifically frames of reference </span><span class="c18">on shapes that serve as a reference for positioning other shapes. Each shape type, like </span><span class="c42">Box</span><span class="c18">&nbsp;or </span><span class="c42">Cylinder</span><span class="c1">, has predefined anchors (e.g., &quot;centre&quot;, &quot;face_centre&quot;, &quot;top&quot;, &quot;base&quot;).</span></p><p class="c11"><span class="c18">When you specify an anchor in the </span><span class="c42">at()</span><span class="c18">&nbsp;or </span><span class="c42">add_at()</span><span class="c1">&nbsp;function, AnchorSCAD resolves the path component of the anchor and calls the corresponding anchor function on the shape, which returns a transformation matrix defining the frame of reference for that anchor.</span></p><a id="t.e99b24b3440ac0d14518ec5918d496e7dd336c37"></a><a id="t.10"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c15">print(ad.Box((10, 20, 30)).at(</span><span class="c51 c63">&#39;centre&#39;</span><span class="c15">))<br>print(ad.Box((10, 20, 30)).centre())</span></p></td></tr></table><p class="c11 c35"><span class="c1"></span></p><p class="c11"><span class="c1">The above code prints the GMatrix, note they&rsquo;re identical.</span></p><a id="t.b0fa8b8f1b53c7505660491db5e247b451e7ca59"></a><a id="t.11"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c56 c53 c52">[<br> &nbsp; &nbsp;[1.0, 0.0, 0.0, 5.0],<br> &nbsp; &nbsp;[0.0, 1.0, 0.0, 10.0],<br> &nbsp; &nbsp;[0.0, 0.0, 1.0, 15.0],<br> &nbsp; &nbsp;[0.0, 0.0, 0.0, 1.0]]<br>[<br> &nbsp; &nbsp;[1.0, 0.0, 0.0, 5.0],<br> &nbsp; &nbsp;[0.0, 1.0, 0.0, 10.0],<br> &nbsp; &nbsp;[0.0, 0.0, 1.0, 15.0],<br> &nbsp; &nbsp;[0.0, 0.0, 0.0, 1.0]]</span></p></td></tr></table><p class="c11 c35"><span class="c1"></span></p><h3 class="c77 c53" id="h.lvfvwr12xhmn"><span class="c54">Creating Complex Model Hierarchies</span></h3><p class="c11"><span class="c18">By nesting </span><span class="c42">Maker</span><span class="c18">&nbsp;instances and </span><span>utilising</span><span class="c18">&nbsp;anchors, you can create complex model hierarchies. Each </span><span class="c42">Maker</span><span class="c18">&nbsp;can be thought of as a container for shapes and other </span><span class="c42">Makers</span><span class="c1">, allowing for detailed and structured model construction.</span></p><p class="c11"><span class="c18">Remember, once a </span><span class="c42">Maker</span><span class="c18">&nbsp;is used within another </span><span class="c42">Maker</span><span class="c18">, it is copied, ensuring that mutations to the </span><span class="c42">Maker</span><span class="c1">&nbsp;after its use are not reflected in nodes that have already been constructed. This behaviour facilitates immutable design patterns, making your model hierarchy more predictable and easier to manage.</span></p><p class="c11 c35"><span class="c1"></span></p><h2 class="c11 c31" id="h.jacs8upk670t"><span class="c28 c90">Datatrees</span></h2><p class="c11"><span class="c4">Building complex hierarchical data objects using </span><span class="c49"><a class="c27" href="https://www.google.com/url?q=https://docs.python.org/library/dataclasses.html&amp;sa=D&amp;source=editors&amp;ust=1707654020167897&amp;usg=AOvVaw2CQA4pUV7dQcA0K-nxT26u">dataclasses</a></span><span class="c4">&nbsp;reduces much of the otherwise needed boilerplate code. This obviously being the point of </span><span class="c49"><a class="c27" href="https://www.google.com/url?q=https://docs.python.org/library/dataclasses.html&amp;sa=D&amp;source=editors&amp;ust=1707654020168219&amp;usg=AOvVaw13gAvGp_uYa9jgiBYz1Jhi">dataclasses</a></span><span class="c4">. While using </span><span class="c49"><a class="c27" href="https://www.google.com/url?q=https://docs.python.org/library/dataclasses.html&amp;sa=D&amp;source=editors&amp;ust=1707654020168380&amp;usg=AOvVaw2v1ZgiN5h9RvFEx0D-T0vy">dataclasses</a></span><span class="c4">&nbsp;to develop </span><span class="c44 c96 c52"><a class="c27" href="https://www.google.com/url?q=https://github.com/owebeeone/anchorscad&amp;sa=D&amp;source=editors&amp;ust=1707654020168497&amp;usg=AOvVaw122JrwTmo9SHspiFKLit43">AnchorSCAD</a></span><span class="c24 c4">&nbsp;I found it to be still a very verbose and repetitive and subsequently fragile when building complex 3D models.</span></p><h3 class="c55 c46 c53" id="h.t7lq29ohtkab"><span class="c54">Introducing datatrees</span></h3><p class="c11"><span class="c49"><a class="c27" href="https://www.google.com/url?q=https://github.com/owebeeone/anchorscad/blob/master/src/anchorscad/datatrees.py&amp;sa=D&amp;source=editors&amp;ust=1707654020168776&amp;usg=AOvVaw0fPljSmfhBbFxVa3oL2hIk">datatrees</a></span><span class="c4">&nbsp;extends (as a wrapper over </span><span class="c6">datatlasses.dataclass</span><span class="c24 c4">) to include:</span></p><ul class="c47 lst-kix_dab0nnle5hev-0 start"><li class="c11 c16 li-bullet-0"><span class="c24 c4">Field injection</span></li><li class="c11 c16 li-bullet-0"><span class="c24 c4">Field binding</span></li><li class="c11 c16 li-bullet-0"><span class="c6">self</span><span class="c24 c4">&nbsp;factory default</span></li></ul><p class="c11"><span class="c49"><a class="c27" href="https://www.google.com/url?q=https://github.com/owebeeone/anchorscad/blob/master/src/anchorscad/datatrees.py&amp;sa=D&amp;source=editors&amp;ust=1707654020169159&amp;usg=AOvVaw0JK5sVj6vgEdBhGah20j9e">datatrees</a></span><span class="c24 c4">&nbsp;can dramatically reduce the overall boilerplate code, however, one still needs to be careful that the datatrees bindings produce the desired outcomes particularly when a multiple classes being injected may cause undesriable name collission.</span></p><h3 class="c55 c46 c53" id="h.5c8kaomwyafz"><span class="c54">Field injection and Field binding</span></h3><p class="c11"><span class="c4">Often one desires building dataclass objects containing other dataclass objects from within the </span><span class="c6">__post_init__</span><span class="c4">&nbsp;function potentially with many instances of the same dataclass type. When creating </span><span class="c44 c96 c52"><a class="c27" href="https://www.google.com/url?q=https://github.com/owebeeone/anchorscad&amp;sa=D&amp;source=editors&amp;ust=1707654020169554&amp;usg=AOvVaw2z_1xohhghtXOPJOqMS49J">AnchorSCAD</a></span><span class="c4">&nbsp;models in particular it may be necessary to build many instances of a dataclass type. For example a 3D model of hole gauge, a plate with multiple holes with different sizes. The height (z) parameter may be shared with all the contained holes while the radius of each individual hole would be specific to that hole. Such a model can be found here (</span><span class="c49"><a class="c27" href="https://www.google.com/url?q=https://github.com/owebeeone/anchorscad/blob/master/src/anchorscad/models/tools/hole_gauge.py&amp;sa=D&amp;source=editors&amp;ust=1707654020169726&amp;usg=AOvVaw1jltd8YDNKtQAsP_9wfTNA">hole_guage</a></span><span class="c24 c4">).</span></p><h4 class="c55 c46 c53" id="h.ozofdz3pzv33"><span class="c24 c89 c52 c105">Datatree Wraps Dataclass</span></h4><a id="t.e77593031b7c5fb633ed31de2b5665817173c213"></a><a id="t.12"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c57 c53 c52">@datatree</span><span class="c9"><br></span><span class="c5">class</span><span class="c9">&nbsp;</span><span class="c23">A</span><span class="c9">:<br> &nbsp; &nbsp;</span><span class="c23">&#39;&#39;&#39;Demonstrates Python dataclasses default value<br> &nbsp; &nbsp;functionality. Even though @datatree is used, this<br> &nbsp; &nbsp;example only uses the base Python @dataclass<br> &nbsp; &nbsp;functionality.<br> &nbsp; &nbsp;&#39;&#39;&#39;</span><span class="c9"><br> &nbsp; &nbsp;v1: int<br> &nbsp; &nbsp;v2: int=2<br> &nbsp; &nbsp;v3: int=field(default=3)<br> &nbsp; &nbsp;v4: int=field(default_factory=</span><span class="c5">lambda</span><span class="c9">: 7 - 3)</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><p class="c11"><span class="c24 c4">Construct with v1 provided..</span></p><a id="t.11b68478d92f9a3015db5444ca06f01da91fb79a"></a><a id="t.13"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c9">A(v1=1)<br> &nbsp;-&gt; A(v1=1, v2=2, v3=3, v4=4)</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><p class="c11"><span class="c24 c4">Comparison of two different instances with the same value.</span></p><a id="t.ebea635cb65a22f2a58293d4c8b14f86e4bde897"></a><a id="t.14"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c9">A(v1=2) == A(v1=2)<br> &nbsp;-&gt; </span><span class="c5">True</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><h3 class="c108 c46 c53" id="h.8czps2w9u57k"><span class="c54">Help for Class A</span></h3><a id="t.cab1fefab911458a9931da4df2bfe9b683296795"></a><a id="t.15"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c5">class</span><span class="c9">&nbsp;</span><span class="c23">A</span><span class="c9">(builtins.object)<br> | &nbsp;</span><span class="c23">A</span><span class="c9">(v1: int, v2: int = 2, v3: int = 3, v4: int = &lt;factory&gt;, override: anchorscad.datatrees.Overrides = None) -&gt; </span><span class="c5">None</span><span class="c9"><br> |<br> | &nbsp;Demonstrates Python dataclasses default value<br> | &nbsp;functionality. Even though @datatree is used, this<br> | &nbsp;example only uses the base Python @dataclass<br> | &nbsp;functionality.<br> | ...</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><h3 class="c46 c53 c108" id="h.3i0ra53l677d"><span class="c54">Datatree Inject and Bind</span></h3><a id="t.1b69a402fd661fffa41526544a2a58852b5b63f4"></a><a id="t.16"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c57 c53 c52">@datatree</span><span class="c9"><br></span><span class="c5">class</span><span class="c9">&nbsp;</span><span class="c23">Anode</span><span class="c9">:<br> &nbsp; &nbsp;</span><span class="c23">&#39;&#39;&#39;Injects fields from class A and provides a<br> &nbsp; &nbsp;default value for A.v1. The a_node field becomes a<br> &nbsp; &nbsp;callable object that provides an instance of A<br> &nbsp; &nbsp;with field values retrieved from self.<br> &nbsp; &nbsp;&#39;&#39;&#39;</span><span class="c9"><br> &nbsp; &nbsp;v1: int=55<br> &nbsp; &nbsp;a_node: Node=Node(A) &nbsp;</span><span class="c36"># Inject field names from A</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><h4 class="c2 c46" id="h.bwsluz94maz"><span class="c24 c89 c105 c52">Injected Fields</span></h4><p class="c11"><span class="c4">Datatree uses the </span><span class="c6">a_node</span><span class="c4">&nbsp;field in </span><span class="c6">class Anode</span><span class="c4">&nbsp;above to inject </span><span class="c6">class A</span><span class="c4">&nbsp;constructor parameters as fields in the containing class (</span><span class="c6">class Anode</span><span class="c24 c4">). Node allows specification of name mappings with mapping dictionaries, prefixes, suffixes or specific exclusion of specific parameters.</span></p><p class="c11"><span class="c4">In the </span><span class="c6">class Anode</span><span class="c4">&nbsp;example above, the field </span><span class="c6">v1</span><span class="c4">&nbsp;is specified so the field </span><span class="c6">v1</span><span class="c4">&nbsp;from </span><span class="c6">class A</span><span class="c4">&nbsp;will not be injected and the default parameters specified in </span><span class="c6">class Anode</span><span class="c4">&nbsp;will remain. However the remaining parameters (</span><span class="c6">v2</span><span class="c4">, </span><span class="c6">v3</span><span class="c4">&nbsp;and </span><span class="c6">v4</span><span class="c4">) will be injected with the default values specified in </span><span class="c6">class A</span><span class="c24 c4">.</span></p><p class="c11"><span class="c4">Constructing a default </span><span class="c6">class Anode</span><span class="c4">&nbsp;will demonstrate the injected values, see parameters </span><span class="c6">v2</span><span class="c4">, </span><span class="c6">v3</span><span class="c4">&nbsp;and </span><span class="c6">v4</span><span class="c4">&nbsp;below:</span></p><a id="t.7ba11a70034eba28065a226a52c226a45bedff12"></a><a id="t.17"></a><table class="c32"><tr class="c50"><td class="c53 c87" colspan="1" rowspan="1"><p class="c22"><span class="c9">Anode()<br> &nbsp;-&gt; Anode(v1=55, a_node=BoundNode(node=Node(clz_or_func=A, use_defaults=</span><span class="c5">True</span><span class="c9">, suffix=</span><span class="c23">&#39;&#39;</span><span class="c9">, prefix=</span><span class="c23">&#39;&#39;</span><span class="c9">, expose_all=</span><span class="c5">True</span><span class="c9">, node_doc=</span><span class="c5">None</span><span class="c9">)), v4=4, v2=2, v3=3) </span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><p class="c11"><span class="c4">Note how the </span><span class="c6">a_node</span><span class="c4">&nbsp;field is transformed into a </span><span class="c6">BoundNode</span><span class="c4">. This is a factory for A objects that will pull all constructor parameters from the </span><span class="c6">Anode</span><span class="c4">&nbsp;object that created it. The example below shows how the </span><span class="c6">a_node</span><span class="c4">&nbsp;constructs a </span><span class="c6">&nbsp;class A</span><span class="c24 c4">&nbsp;object pulling all parameters from the instance containing it.</span></p><h3 class="c55 c46 c53" id="h.cv88s0fgldjc"><span class="c54">Example of field binding,</span></h3><a id="t.d4e85d89ab0f3d0ec3a6560df731d1f5b52e27b8"></a><a id="t.18"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c9">Anode().a_node()<br> &nbsp;-&gt; A(v1=55, v2=2, v3=3, v4=4)</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><p class="c11"><span class="c4">The </span><span class="c6">BoundNode</span><span class="c4">&nbsp;factory also allows all the parameters provided in the associated class (or function) from the corresponding Node. In this case, the </span><span class="c6">v3</span><span class="c4">&nbsp;parameter is overridden with the value </span><span class="c6">33</span><span class="c24 c4">.</span></p><h3 class="c55 c46 c53" id="h.692bimoliw3f"><span class="c54">Example of overriding the field binding.</span></h3><a id="t.88a9988b9ebbc0b9c76962dfe5be3211ab8cb3f8"></a><a id="t.19"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c9">Anode().a_node(v3=33)<br> &nbsp;-&gt; A(v1=55, v2=2, v3=33, v4=4)</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><h3 class="c55 c46 c53" id="h.2pystbkm0pq7"><span class="c96 c52">Binding Parameters In </span><span class="c52 c102">self default</span><span class="c92 c83 c96">&nbsp;Fields</span></h3><p class="c11"><span class="c6">dataclasses.field</span><span class="c4">&nbsp;provides field attributes </span><span class="c6">default</span><span class="c4">&nbsp;and </span><span class="c6">factory_default</span><span class="c4">&nbsp;parameters, the latter being evaluated at object initialization. datatree.dtfield wraps </span><span class="c6">dataclasses.field</span><span class="c4">&nbsp;providing a </span><span class="c6">self_default</span><span class="c24 c4">&nbsp;parameter that takes a function object with a single parameter. At class initialization, these functions are evaluated with the object instance as its value.</span></p><p class="c11"><span class="c4">The order of evaluation is the order in which they are declared in the class additionally they are evaluated after all the </span><span class="c6">Node</span><span class="c4">&nbsp;fields have been bound (transformed into BoundNode factories). This allows fields specified with a </span><span class="c6">self_default</span><span class="c4">&nbsp;attribute to use any field specified with </span><span class="c6">Node</span><span class="c4">&nbsp;as long as invoking </span><span class="c6">BoundNodes</span><span class="c4">&nbsp;factories (bindings) do not attempt to access </span><span class="c6">self_default</span><span class="c24 c4">&nbsp;fields that are not yet evaluated.</span></p><h3 class="c55 c46 c53" id="h.xcjdt3qxeso4"><span class="c54">Injecting Computed Defaults</span></h3><p class="c11"><span class="c4">In the example below, </span><span class="c6">class Bind</span><span class="c4">&nbsp;defines the field </span><span class="c6">v1</span><span class="c4">&nbsp;as a computed sum </span><span class="c6">v2 + v3</span><span class="c24 c4">.</span></p><a id="t.f1034230b552c4526fc4b7217eb28adb113ac057"></a><a id="t.20"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c57 c53 c52">@datatree</span><span class="c9"><br></span><span class="c5">class</span><span class="c9">&nbsp;</span><span class="c23">Bind</span><span class="c9">:<br> &nbsp; &nbsp;</span><span class="c23">&#39;&#39;&#39;Demonstrates the use of a computed default value.<br> &nbsp; &nbsp;Often a value used in nodes should be computed with other parameters<br> &nbsp; &nbsp;provided to this instance.&#39;&#39;&#39;</span><span class="c9"><br> &nbsp; &nbsp;v1: int=dtfield(self_default=</span><span class="c5">lambda</span><span class="c9">&nbsp;s: s.v2 + s.v3)<br> &nbsp; &nbsp;a_node: Node=field(default=Node(A), repr=</span><span class="c5">False</span><span class="c9">, init=</span><span class="c5">False</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><p class="c11"><span class="c4">The default value of </span><span class="c6">class Bind</span><span class="c4">&nbsp;is </span><span class="c6">Bind(v1=5, v2=2, v4=4, v3=3)</span><span class="c4">. Note the value of </span><span class="c6">v1</span><span class="c24 c4">&nbsp;being the specified sum.</span></p><p class="c11"><span class="c4">This demonstrates the value of </span><span class="c6">v1</span><span class="c4">&nbsp;is evaluated with the values of </span><span class="c6">v2</span><span class="c4">&nbsp;and </span><span class="c6">v2</span><span class="c24 c4">&nbsp;that are provided in the constructor.</span></p><a id="t.2138cd009b9762eb6c7ee9c525022d7f977c3295"></a><a id="t.21"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c9">Bind(v2=10)<br> &nbsp;-&gt; Bind(v1=13, v2=10, v4=4, v3=3)</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><h3 class="c46 c53 c55" id="h.t239kjpx44ew"><span class="c54">Injecting Function Parameters</span></h3><p class="c11"><span class="c4">The example below shows that any function (or lambda) can be used as a </span><span class="c6">datatrees.Node</span><span class="c4">. In the example below, the fields </span><span class="c6">lamba_node</span><span class="c4">&nbsp;and </span><span class="c6">func_node</span><span class="c4">&nbsp;use different declaration of essentially the same function but the parameter names from </span><span class="c6">func_a</span><span class="c24 c4">&nbsp;are also injected.</span></p><a id="t.b93fe23328cf9d824aa8e13c706bb0b73cd67fb1"></a><a id="t.22"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c5">def</span><span class="c9">&nbsp;</span><span class="c23">func_a</span><span class="c9">(x: int=1, y:int=3):<br> &nbsp; &nbsp;</span><span class="c5">return</span><span class="c9">&nbsp;x + y<br><br></span><span class="c53 c52 c57">@datatree</span><span class="c9"><br></span><span class="c5">class</span><span class="c9">&nbsp;</span><span class="c23">BindFunc</span><span class="c9">:<br> &nbsp; &nbsp;</span><span class="c23">&#39;&#39;&#39;Injected function parameters.&#39;&#39;&#39;</span><span class="c9"><br> &nbsp; &nbsp;a: int=1<br> &nbsp; &nbsp;b: int=1<br> &nbsp; &nbsp;lambda_node: Node=Node(</span><span class="c5">lambda</span><span class="c9">&nbsp;a, b: a + b)<br> &nbsp; &nbsp;func_node: Node=Node(func_a)</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><p class="c11"><span class="c4">The lambda_node will bind the values </span><span class="c6">a</span><span class="c4">&nbsp;and </span><span class="c6">b</span><span class="c24 c4">&nbsp;and pass it to the lambda in the in the class declaration.</span></p><a id="t.e6e8ec7aeb579d0ddc9d4d836dd2df2d81b027e0"></a><a id="t.23"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c9">BindFunc().lambda_node()<br> &nbsp;-&gt; 2</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><p class="c11"><span class="c4">This demonstrates the default value for </span><span class="c6">x</span><span class="c4">&nbsp;being overridden and the default value for </span><span class="c6">y</span><span class="c4">&nbsp;being used in the call to </span><span class="c6">func_a</span><span class="c24 c4">.</span></p><a id="t.70fbecfff0a9ccb8b43183f4866aba8ea6f94d88"></a><a id="t.24"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c9">BindFunc(x=5).func_node()<br> &nbsp;-&gt; 8</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><h3 class="c55 c46 c53" id="h.4uit21mf1804"><span class="c54">Inheritance with Datatrees</span></h3><a id="t.bb4d65c97210e86ff8f83b2668f568451b7301b6"></a><a id="t.25"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c57 c53 c52">@datatree</span><span class="c9"><br></span><span class="c5">class</span><span class="c9">&nbsp;</span><span class="c23">E</span><span class="c9">:<br> &nbsp; &nbsp;</span><span class="c23">&#39;&#39;&#39;Using the dtfield() function to create a BindingDefault entry.&#39;&#39;&#39;</span><span class="c9"><br> &nbsp; &nbsp;v1: int=1<br> &nbsp; &nbsp;v2: int=2<br> &nbsp; &nbsp;v_computed: Node=dtfield(self_default=</span><span class="c5">lambda</span><span class="c9">&nbsp;s: s.v1 + s.v2)<br><br><br></span><span class="c57 c53 c52">@datatree</span><span class="c9"><br></span><span class="c5">class</span><span class="c9">&nbsp;</span><span class="c23">F</span><span class="c9">(E, A):<br> &nbsp; &nbsp;</span><span class="c23">&#39;&#39;&#39;Inheritance of datatree classes is allowed, fields are merged.<br> &nbsp; &nbsp;in the same way as dataclasses.&#39;&#39;&#39;</span><span class="c9"><br><br>F()<br> &nbsp;-&gt; F(v1=1, v2=2, v3=3, v4=4, v_computed=3)<br><br>F(v4=44)<br> &nbsp;-&gt; F(v1=1, v2=2, v3=3, v4=44, v_computed=3)</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><h3 class="c55 c46 c53" id="h.f1g1trrrtgql"><span class="c54">Mapping Injected Names with a Prefix or Suffix</span></h3><p class="c11"><span class="c4">It is often important to inject the same or similar class with identical field names. </span><span class="c6">datatree.Node</span><span class="c4">&nbsp;provides for </span><span class="c6">prefix=</span><span class="c4">&nbsp;and </span><span class="c6">suffix=</span><span class="c24 c4">&nbsp;specifiers that can be used to map injected parameter names.</span></p><a id="t.c9f4b4aac3fb9abc4ab06eecc8d7400c325b421f"></a><a id="t.26"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c57 c53 c52">@datatree</span><span class="c9"><br></span><span class="c5">class</span><span class="c9">&nbsp;</span><span class="c23">C</span><span class="c9">:<br> &nbsp; &nbsp;</span><span class="c23">&#39;&#39;&#39;Multiple nodes of the same type with parameter name mapping.&#39;&#39;&#39;</span><span class="c9"><br> &nbsp; &nbsp;a_v1: int=11<br> &nbsp; &nbsp;a_node: Node=field(default=Node(A, prefix=</span><span class="c23">&#39;a_&#39;</span><span class="c9">), repr=</span><span class="c5">False</span><span class="c9">)<br> &nbsp; &nbsp;b_v1: int=12<br> &nbsp; &nbsp;b_node: Node=field(default=Node(A, prefix=</span><span class="c23">&#39;b_&#39;</span><span class="c9">), repr=</span><span class="c5">False</span><span class="c9">)<br> &nbsp; &nbsp;computed: int=BindingDefault(</span><span class="c5">lambda</span><span class="c9">&nbsp;s: s.a_v2 + s.b_v2)<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c5">def</span><span class="c9">&nbsp;</span><span class="c23">__post_init__</span><span class="c9">(self):<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">pass</span><span class="c9">&nbsp;</span><span class="c36"># Called after initialization is complete.</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c5">def</span><span class="c9">&nbsp;</span><span class="c23">make_stuff</span><span class="c9">(self):<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">return</span><span class="c9">&nbsp;self.a_node(v2=22), self.b_node(), self.computed</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><p class="c11"><span class="c4">Note the call below to </span><span class="c6">make_stuff()</span><span class="c4">&nbsp;that returns a tuple of the result of invoking </span><span class="c6">a_node()</span><span class="c4">&nbsp;and </span><span class="c6">b_node()</span><span class="c4">&nbsp;from a default </span><span class="c6">class C</span><span class="c4">&nbsp;instance. The fields </span><span class="c6">a_v1</span><span class="c4">&nbsp;and </span><span class="c6">b_v1</span><span class="c4">&nbsp;are injected into calls for </span><span class="c6">a_node()</span><span class="c4">&nbsp;and </span><span class="c6">b_node()</span><span class="c4">&nbsp;respectively and hence the difference in the instances of the instances of </span><span class="c6">class A</span><span class="c24 c4">&nbsp;being created.</span></p><a id="t.781753698b5311d6a5d6c08e7bcc73a481094362"></a><a id="t.27"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c9">C().make_stuff()<br> &nbsp;-&gt; (A(v1=11, v2=22, v3=3, v4=4), A(v1=12, v2=2, v3=3, v4=4), 4)</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><h3 class="c55 c46 c53" id="h.8ybk8kqyve7x"><span class="c54">Override</span></h3><p class="c11"><span class="c4">As mentioned earlier, the </span><span class="c6">override</span><span class="c4">&nbsp;parameter should only be used for debugging purposes. This uses the </span><span class="c6">datatrees.override</span><span class="c4">&nbsp;function to generate a </span><span class="c6">datatrees.Override</span><span class="c4">&nbsp;instance. The parameters to </span><span class="c6">datatrees.override</span><span class="c24 c4">&nbsp;are simply parameters to override that will replace any provided value including explicit values. Since the override parameter is passed down, it also is able to hierarchically provide override values for contained bound nodes.</span></p><a id="t.955110693d269e4812acbd38e16819e8525a8dc6"></a><a id="t.28"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c57 c53 c52">@datatree</span><span class="c9"><br></span><span class="c5">class</span><span class="c9">&nbsp;</span><span class="c23">O</span><span class="c9">:<br> &nbsp; &nbsp;</span><span class="c23">&#39;&#39;&#39;Deep tree of injected fields.&#39;&#39;&#39;</span><span class="c9"><br> &nbsp; &nbsp;c_node: Node=dtfield(Node(C, </span><span class="c23">&#39;a_v1&#39;</span><span class="c9">), init=</span><span class="c5">False</span><span class="c9">, repr=</span><span class="c5">False</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><p class="c11"><span class="c4">Note that </span><span class="c6">class O</span><span class="c4">&nbsp;has only one injected parameter, </span><span class="c6">a_v1</span><span class="c4">. The default constructor demonstrates the only provided parameter. The default of </span><span class="c6">a_v1</span><span class="c4">&nbsp;is from </span><span class="c6">class C</span><span class="c4">&rsquo;s default value for </span><span class="c6">a_v1</span><span class="c24 c4">,</span></p><a id="t.c317e5c717438c7711ed8f037f3b5eaaf99f1d62"></a><a id="t.29"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c9">O()<br> &nbsp;-&gt; O(a_v1=11)</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><p class="c11"><span class="c4">This demonstrates the node generating an instance of </span><span class="c6">class C</span><span class="c24 c4">.</span></p><a id="t.7ac4b950f24d587e1ce5d0a544c37a95e84e8b7d"></a><a id="t.30"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c9">O().c_node()<br> &nbsp;-&gt; C(a_v1=11, a_v2=2, a_v4=4, a_v3=3, b_v1=12, b_v2=2, b_v4=4, b_v3=3, computed=4)</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><p class="c11"><span class="c4">This demonstrates using the override parameter with an </span><span class="c6">Override</span><span class="c4">&nbsp;specifier that overrides multiple layers within the </span><span class="c6">class O</span><span class="c4">&nbsp;datatree class. Node how the </span><span class="c6">b_node</span><span class="c4">&nbsp;override specifier for </span><span class="c6">v2=909090</span><span class="c4">&nbsp;is reflected in the resulting value of </span><span class="c6">A()</span><span class="c4">&nbsp;while </span><span class="c6">b_node</span><span class="c4">&nbsp;is called with a value for </span><span class="c6">v2</span><span class="c4 c24">&nbsp;that is ignored.</span></p><a id="t.da870582632c6e86cbdd961f51f92fd364f5bac3"></a><a id="t.31"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c9">O(<br> &nbsp; &nbsp;override=override(<br> &nbsp; &nbsp; &nbsp; &nbsp;c_node=dtargs(<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;override=override(<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;b_node=dtargs(v2=909090)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)))).c_node().b_node(v2=55555)<br> &nbsp;-&gt; A(v1=12, v2=909090, v3=3, v4=4)</span></p></td></tr></table><p class="c37 c35"><span class="c0"></span></p><p class="c11"><span class="c4">Overriding values in this way can cause code to be fragile as disregarding parameter values with those provided by some unrelated function will inevitably cause unexpected and silent issues to appear which are difficult to diagnose. This is why the </span><span class="c6">override</span><span class="c24 c4">&nbsp;parameter should only be used for debugging purposes and not otherwise used.</span></p><h3 class="c55 c46 c53" id="h.qg6j8sexkdev"><span class="c54">Hole Gauge Example</span></h3><p class="c11"><span class="c4">The </span><span class="c6">hole_guage.py</span><span class="c4">&nbsp;code below (found in </span><span class="c49"><a class="c27" href="https://www.google.com/url?q=https://github.com/owebeeone/anchorscad/blob/master/src/anchorscad/models/tools/hole_gauge.py&amp;sa=D&amp;source=editors&amp;ust=1707654020183900&amp;usg=AOvVaw1ytoh0EsIrUTicqPjK1S0m">hole_guage</a></span><span class="c4">) demonstrates how two </span><span class="c6">anchorscad.CompositeShape</span><span class="c4">&nbsp;3D models can be used where one shape class instance consists of multiple instances of another 3D model and the parameters can be shared. It also demonstrates how </span><span class="c6">self_default</span><span class="c4">&nbsp;bindings can be used in conjunction with </span><span class="c6">BoundNode</span><span class="c24 c4">&nbsp;factories.</span></p><p class="c11"><span class="c4">To demonstrate the doc field attribute, the following is the </span><span class="c6">pydoc</span><span class="c4">&nbsp;generated for </span><span class="c6">HoleGuage</span><span class="c4">. Note the fields </span><span class="c6">fn</span><span class="c4">, </span><span class="c6">fa</span><span class="c4">&nbsp;and </span><span class="c6">fs</span><span class="c4">&nbsp;are used in AnchorSCAD and it&rsquo;s desirable to pass these attributes to constructors of contained classes as these are used by the rendering engine to determine the complexity of the polyhedrons approximations of curved surfaces. This is a feature of the </span><span class="c6">anchorscad.ShapeNode</span><span class="c4">&nbsp;subclass of </span><span class="c6">datatrees.Node</span><span class="c24 c4">.</span></p><a id="t.6f395bfc3909f7b9929e7ff6c05bfecade26ad81"></a><a id="t.32"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c9">&nbsp; &nbsp;</span><span class="c5">class</span><span class="c9">&nbsp;</span><span class="c23">HoleGauge</span><span class="c9">(anchorscad.core.CompositeShape)<br> &nbsp; &nbsp; | &nbsp;</span><span class="c23">HoleGauge</span><span class="c9">(hole_rss: Tuple[Tuple[float]], sep: float = 5, fn: int = None, epsilon: float = 0.005, fa: float = None, h: float = 5, fs: float = None, override: anchorscad.datatrees.Overrides = None) -&gt; </span><span class="c5">None</span><span class="c9"><br> &nbsp; &nbsp; | &nbsp;<br> &nbsp; &nbsp; | &nbsp;A plate with a matrix of holes of different radii provided in hole_rss.<br> &nbsp; &nbsp; | &nbsp;Args:<br> &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp;hole_rss: Tuple of tuple of hole radii<br> &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp;sep: </span><span class="c5">None</span><span class="c9">: Margin of separation between holes </span><span class="c5">and</span><span class="c9">&nbsp;edges<br> &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp;fn: </span><span class="c5">None</span><span class="c9">: </span><span class="c5">None</span><span class="c9">: fixed number of segments. Overrides fa </span><span class="c5">and</span><span class="c9">&nbsp;fs<br> &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp;epsilon: </span><span class="c5">None</span><span class="c9">: Fudge factor to remove aliasing<br> &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp;fa: </span><span class="c5">None</span><span class="c9">: </span><span class="c5">None</span><span class="c9">: minimum angle (</span><span class="c5">in</span><span class="c9">&nbsp;degrees) of each segment<br> &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp;h: </span><span class="c5">None</span><span class="c9">: Depth of plate<br> &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp;fs: </span><span class="c5">None</span><span class="c9">: </span><span class="c5">None</span><span class="c9">: minimum length of each segment<br> &nbsp; &nbsp; | &nbsp;Other args:<br> &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp;override<br> &nbsp; ...</span></p></td></tr></table><p class="c35 c37"><span class="c0"></span></p><h3 class="c2 c46" id="h.mfp7s48i04ka"><span class="c4">From: </span><span class="c52 c67"><a class="c27" href="https://www.google.com/url?q=https://github.com/owebeeone/anchorscad/blob/master/src/anchorscad/models/tools/hole_gauge.py&amp;sa=D&amp;source=editors&amp;ust=1707654020185766&amp;usg=AOvVaw3NxgwyeOPHf70IJxP1PQCV">hole_guage</a></span></h3><p class="c11"><span class="c4">The code below is a 3D model using AnchorSCAD that generates a plate of holes. The </span><span class="c6">SingleHoleGauge</span><span class="c4">&nbsp;class generates a single row of holes with radii specified by the hole_rs parameter and the thickness of the plate specified by the </span><span class="c6">h</span><span class="c4">&nbsp;parameter. The </span><span class="c6">HoleGauge</span><span class="c4">&nbsp;class is similar but generates a grid of holes specified by a tuple of tuples of hole radii via parameter </span><span class="c6">hole_rss</span><span class="c24 c4">.</span></p><p class="c11"><span class="c6">HoleGauge</span><span class="c4">&nbsp;generates a number of </span><span class="c6">SingleHoleGauge</span><span class="c4">&nbsp;shapes and stitches them together but also creates an overall plate sized to contain all the </span><span class="c6">SingleHoleGauge</span><span class="c24 c4">&nbsp;shapes in a single &lsquo;assembly&rsquo; plate.</span></p><a id="t.620a8075f8d23e6cb1b3281649b376f6c0ecdc07"></a><a id="t.33"></a><table class="c21"><tr class="c50"><td class="c17" colspan="1" rowspan="1"><p class="c22"><span class="c5">import</span><span class="c9">&nbsp;anchorscad </span><span class="c5">as</span><span class="c9">&nbsp;ad<br></span><span class="c5">from</span><span class="c9">&nbsp;typing </span><span class="c5">import</span><span class="c9">&nbsp;Tuple<br><br></span><span class="c57 c53 c52">@ad.shape</span><span class="c9"><br></span><span class="c57 c53 c52">@ad.datatree(frozen=True)</span><span class="c9"><br></span><span class="c5">class</span><span class="c9">&nbsp;</span><span class="c23">SingleHoleGauge</span><span class="c9">(ad.CompositeShape):<br> &nbsp; &nbsp;</span><span class="c23">&#39;&#39;&#39;A plate with a line of holes of different radii provided in hole_rs.&#39;&#39;&#39;</span><span class="c9"><br> &nbsp; &nbsp;hole_rs: Tuple[float]=ad.dtfield(doc=</span><span class="c23">&#39;Tuple of hole radii&#39;</span><span class="c9">)<br> &nbsp; &nbsp;h: float=ad.dtfield(5, </span><span class="c23">&#39;Depth of plate&#39;</span><span class="c9">)<br> &nbsp; &nbsp;sep: float=ad.dtfield(5, </span><span class="c23">&#39;Margin of separation between holes and edges&#39;</span><span class="c9">)<br> &nbsp; &nbsp;x: float=ad.dtfield(doc=</span><span class="c23">&#39;Width (x) of plate&#39;</span><span class="c9">, <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self_default=</span><span class="c5">lambda</span><span class="c9">&nbsp;s: <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sum(s.hole_rs) * 2 + (len(s.hole_rs) + 1) * s.sep)<br> &nbsp; &nbsp;y: float=ad.dtfield(doc=</span><span class="c23">&#39;Depth (y) of plate&#39;</span><span class="c9">, <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self_default=</span><span class="c5">lambda</span><span class="c9">&nbsp;s: max(s.hole_rs) * 2 + 2 * s.sep)<br> &nbsp; &nbsp;plate_size: Tuple[float]=ad.dtfield(doc=</span><span class="c23">&#39;The (x, y, z) size of the plate Box shape&#39;</span><span class="c9">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self_default=</span><span class="c5">lambda</span><span class="c9">&nbsp;s: (s.x, s.y, s.h - 2 * s.epsilon))<br> &nbsp; &nbsp;plate_node: ad.Node=ad.dtfield(ad.ShapeNode(ad.Box, prefix=</span><span class="c23">&#39;plate_&#39;</span><span class="c9">), init=</span><span class="c5">False</span><span class="c9">)<br> &nbsp; &nbsp;hole_node: ad.Node=ad.dtfield(ad.ShapeNode(ad.Cylinder, </span><span class="c23">&#39;h&#39;</span><span class="c9">), init=</span><span class="c5">False</span><span class="c9">)<br> &nbsp; &nbsp;epsilon: float=ad.dtfield(0.005, </span><span class="c23">&#39;Fudge factor to remove aliasing&#39;</span><span class="c9">)<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;EXAMPLE_SHAPE_ARGS=ad.args(fn=64, hole_rs=(3, 4, 5, 6, 10))<br> &nbsp; &nbsp;EXAMPLE_ANCHORS=()<br><br> &nbsp; &nbsp;</span><span class="c5">def</span><span class="c9">&nbsp;</span><span class="c23">build</span><span class="c9">(self) -&gt; ad.Maker:<br> &nbsp; &nbsp; &nbsp; &nbsp;maker = self.plate_node().solid(</span><span class="c23">&#39;plate&#39;</span><span class="c9">).at(</span><span class="c23">&#39;centre&#39;</span><span class="c9">)<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;offset = self.sep<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">for</span><span class="c9">&nbsp;i, r </span><span class="c5">in</span><span class="c9">&nbsp;enumerate(self.hole_rs):<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hole = self.hole_node(r=r)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;offset += r<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;maker.add_at(<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hole.hole((</span><span class="c23">&#39;hole&#39;</span><span class="c9">, i))<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.at(</span><span class="c23">&#39;base&#39;</span><span class="c9">, post=ad.translate((0, -offset, -self.epsilon))),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c23">&#39;face_edge&#39;</span><span class="c9">, </span><span class="c23">&#39;base&#39;</span><span class="c9">, 1)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;offset += r + self.sep<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">return</span><span class="c9">&nbsp;maker<br> &nbsp; &nbsp;<br><br></span><span class="c57 c53 c52">@ad.shape</span><span class="c9"><br></span><span class="c57 c53 c52">@ad.datatree(frozen=True)</span><span class="c9"><br></span><span class="c5">class</span><span class="c9">&nbsp;</span><span class="c23">HoleGauge</span><span class="c9">(ad.CompositeShape):<br> &nbsp; &nbsp;</span><span class="c23">&#39;&#39;&#39;A plate with a matrix of holes of different radii provided in hole_rss.&#39;&#39;&#39;</span><span class="c9"><br> &nbsp; &nbsp;hole_rss: Tuple[Tuple[float]]=ad.dtfield(doc=</span><span class="c23">&#39;Tuple of tuple of hole radii&#39;</span><span class="c9">)<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;single_hole_gauge: ad.Node=ad.dtfield(<br> &nbsp; &nbsp; &nbsp; &nbsp;ad.ShapeNode(SingleHoleGauge,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; exclude=(</span><span class="c23">&#39;hole_rs&#39;</span><span class="c9">, </span><span class="c23">&#39;x&#39;</span><span class="c9">, </span><span class="c23">&#39;y&#39;</span><span class="c9">, </span><span class="c23">&#39;plate_size&#39;</span><span class="c9">)),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; init=</span><span class="c5">False</span><span class="c9">)<br> &nbsp; &nbsp;shapes: Tuple[ad.Shape]=ad.dtfield(<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;doc=</span><span class="c23">&#39;Tuple of shapes placed in the hole gauge plate&#39;</span><span class="c9">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self_default=</span><span class="c5">lambda</span><span class="c9">&nbsp;s: tuple(s.single_hole_gauge(hole_rs=rs) </span><span class="c5">for</span><span class="c9">&nbsp;rs </span><span class="c5">in</span><span class="c9">&nbsp;s.hole_rss),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;init=</span><span class="c5">False</span><span class="c9">)<br> &nbsp; &nbsp;plate_size: Tuple[float]=ad.dtfield(<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;doc=</span><span class="c23">&#39;The (x, y, z) size of the plate Box shape&#39;</span><span class="c9">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self_default=</span><span class="c5">lambda</span><span class="c9">&nbsp;s:(<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;max(sh.x </span><span class="c5">for</span><span class="c9">&nbsp;sh </span><span class="c5">in</span><span class="c9">&nbsp;s.shapes),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sum(sh.y </span><span class="c5">for</span><span class="c9">&nbsp;sh </span><span class="c5">in</span><span class="c9">&nbsp;s.shapes) - (len(s.shapes) - 1) * s.sep,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;s.h - 2 * s.epsilon),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;init=</span><span class="c5">False</span><span class="c9">)<br> &nbsp; &nbsp;plate_node: ad.Node=ad.dtfield(ad.ShapeNode(ad.Box, prefix=</span><span class="c23">&#39;plate_&#39;</span><span class="c9">),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; doc=</span><span class="c23">&#39;The plate node factory&#39;</span><span class="c9">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; init=</span><span class="c5">False</span><span class="c9">)<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;EXAMPLE_SHAPE_ARGS=ad.args(<br> &nbsp; &nbsp; &nbsp; &nbsp;fn=64, <br> &nbsp; &nbsp; &nbsp; &nbsp;hole_rss=((3, 4, 5, 6, 8, 10), (16, 14, 12)))<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c5">def</span><span class="c9">&nbsp;</span><span class="c23">build</span><span class="c9">(self) -&gt; ad.Maker:<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c36"># Create a builder plate the size of the entire assembly.</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;maker = self.plate_node().solid(</span><span class="c23">&#39;plate&#39;</span><span class="c9">).at(</span><span class="c23">&#39;centre&#39;</span><span class="c9">)<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c36"># Adds all shapes into the assembly plate.</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;offset = 0<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">for</span><span class="c9">&nbsp;i, shape </span><span class="c5">in</span><span class="c9">&nbsp;enumerate(self.shapes):<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;maker.add_at(shape.composite((</span><span class="c23">&#39;inner_plate&#39;</span><span class="c9">, i))<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .at(</span><span class="c23">&#39;face_edge&#39;</span><span class="c9">, </span><span class="c23">&#39;base&#39;</span><span class="c9">, 0, post=ad.tranY(-offset)),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">&#39;face_edge&#39;</span><span class="c9">, </span><span class="c23">&#39;base&#39;</span><span class="c9">, 0)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;offset += shape.y - self.sep<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">return</span><span class="c9">&nbsp;maker<br><br>MAIN_DEFAULT=ad.ModuleDefault(</span><span class="c5">True</span><span class="c9">) &nbsp;</span><span class="c36"># Default to --write</span><span class="c9"><br><br></span><span class="c5">if</span><span class="c9">&nbsp;__name__ == </span><span class="c23">&quot;__main__&quot;</span><span class="c9">:<br> &nbsp; &nbsp;ad.anchorscad_main()</span></p></td></tr></table><p class="c11 c35"><span class="c1"></span></p></body></html>